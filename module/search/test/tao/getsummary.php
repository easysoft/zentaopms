#!/usr/bin/env php
<?php

/**

title=测试 searchTao::getSummary();
timeout=0
cid=18329

- 步骤1：短内容有关键词 @短内容<span class='text-danger'>测试 </span>
- 步骤2：短内容无关键词 @这是一个测试文档内容，用于验证摘要功能
- 步骤3：长内容有关键词 @这是一个非常长的测试文档内容，包含很多信息和详细描述。文档中有重要的<span class='text-danger'>关键词 </span> 需要被搜索和高亮显示。这个功能对于用户快速找到相关内容非常重要，可以提高搜索效率和用户体验。
- 步骤4：长内容无关键词 @这是一个非常长的测试文档内容，包含很多信息和详细描述。文档中没有特殊词汇需要被搜
- 步骤5：单关键词匹配 @前面有一些内容。中间位置有一个重要的<span class='text-danger'>关键词 </span> 需要高亮。后面还有更多的内容和描述信息，用来测试摘要截取功能。

*/

// 1. 导入依赖（路径固定，不可修改）
include dirname(__FILE__, 5) . '/test/lib/init.php';
include dirname(__FILE__, 2) . '/lib/search.unittest.class.php';

// 2. zendata数据准备（根据需要配置）
// getSummary方法主要测试内容处理逻辑，不依赖searchdict数据

// 3. 用户登录（选择合适角色）
su('admin');

// 4. 创建测试实例（变量名与模块名一致）
$searchTest = new searchTest();

// 5. 强制要求：必须包含至少5个测试步骤
r($searchTest->getSummaryTest('短内容测试', '测试')) && p() && e("短内容<span class='text-danger'>测试 </span>  "); // 步骤1：短内容有关键词
r($searchTest->getSummaryTest('这是一个测试文档内容，用于验证摘要功能', '')) && p() && e('这是一个测试文档内容，用于验证摘要功能'); // 步骤2：短内容无关键词
r($searchTest->getSummaryTest('这是一个非常长的测试文档内容，包含很多信息和详细描述。文档中有重要的关键词需要被搜索和高亮显示。这个功能对于用户快速找到相关内容非常重要，可以提高搜索效率和用户体验。', '关键词')) && p() && e("这是一个非常长的测试文档内容，包含很多信息和详细描述。文档中有重要的<span class='text-danger'>关键词 </span> 需要被搜索和高亮显示。这个功能对于用户快速找到相关内容非常重要，可以提高搜索效率和用户体验。 "); // 步骤3：长内容有关键词
r($searchTest->getSummaryTest('这是一个非常长的测试文档内容，包含很多信息和详细描述。文档中没有特殊词汇需要被搜索和高亮显示。这个功能对于用户快速找到相关内容非常重要，可以提高搜索效率和用户体验。整个文档的长度超过了默认的摘要长度限制，因此需要进行截取处理。', '')) && p() && e('这是一个非常长的测试文档内容，包含很多信息和详细描述。文档中没有特殊词汇需要被搜'); // 步骤4：长内容无关键词
r($searchTest->getSummaryTest('前面有一些内容。中间位置有一个重要的关键词需要高亮。后面还有更多的内容和描述信息，用来测试摘要截取功能。', '关键词')) && p() && e("前面有一些内容。中间位置有一个重要的<span class='text-danger'>关键词 </span> 需要高亮。后面还有更多的内容和描述信息，用来测试摘要截取功能。 "); // 步骤5：单关键词匹配
