#!/usr/bin/env php
<?php

/**

title=æµ‹è¯• storyZen::convertChildID();
timeout=0
cid=0

- æ­¥éª¤1ï¼šæ­£å¸¸IDåˆ—è¡¨
 -  @1
 - å±æ€§1 @2
 - å±æ€§2 @3
- æ­¥éª¤2ï¼šåŒ…å«å¸¦å‡å·çš„å­éœ€æ±‚ID
 -  @1
 - å±æ€§1 @2
 - å±æ€§2 @3
- æ­¥éª¤3ï¼šåŒ…å«é‡å¤çš„ID
 -  @1
 - å±æ€§1 @2
 - å±æ€§3 @3
- æ­¥éª¤4ï¼šåŒ…å«ç©ºå€¼çš„æ•°ç»„
 -  @1
 - å±æ€§3 @2
 - å±æ€§5 @3
- æ­¥éª¤5ï¼šæ··åˆæƒ…å†µ
 -  @1
 - å±æ€§1 @5
 - å±æ€§2 @2
 - å±æ€§3 @10

*/

// 1. å¯¼å…¥ä¾èµ–ï¼ˆè·¯å¾„å›ºå®šï¼Œä¸å¯ä¿®æ”¹ï¼‰
include dirname(__FILE__, 5) . '/test/lib/init.php';
include dirname(__FILE__, 2) . '/lib/storyzen.unittest.class.php';

// 2. ç”¨æˆ·ç™»å½•ï¼ˆé€‰æ‹©åˆé€‚è§’è‰²ï¼‰
su('admin');

// 3. åˆ›å»ºæµ‹è¯•å®ä¾‹ï¼ˆå˜é‡åä¸æ¨¡å—åä¸€è‡´ï¼‰
$storyTest = new storyZenTest();

// 4. ğŸ”´ å¼ºåˆ¶è¦æ±‚ï¼šå¿…é¡»åŒ…å«è‡³å°‘5ä¸ªæµ‹è¯•æ­¥éª¤
r($storyTest->convertChildIDTest([1, 2, 3])) && p('0,1,2') && e('1,2,3'); // æ­¥éª¤1ï¼šæ­£å¸¸IDåˆ—è¡¨
r($storyTest->convertChildIDTest(['100-1', '100-2', '100-3'])) && p('0,1,2') && e('1,2,3'); // æ­¥éª¤2ï¼šåŒ…å«å¸¦å‡å·çš„å­éœ€æ±‚ID
r($storyTest->convertChildIDTest([1, 2, 2, 3, 3, 3])) && p('0,1,3') && e('1,2,3'); // æ­¥éª¤3ï¼šåŒ…å«é‡å¤çš„ID
r($storyTest->convertChildIDTest([1, '', 0, 2, null, 3])) && p('0,3,5') && e('1,2,3'); // æ­¥éª¤4ï¼šåŒ…å«ç©ºå€¼çš„æ•°ç»„
r($storyTest->convertChildIDTest([1, '100-5', 2, '200-10', 0, ''])) && p('0,1,2,3') && e('1,5,2,10'); // æ­¥éª¤5ï¼šæ··åˆæƒ…å†µ