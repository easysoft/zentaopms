var Bt=Object.defineProperty,Mt=Object.defineProperties;var Ut=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var pt=(t,n,e)=>n in t?Bt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Y=(t,n)=>{for(var e in n||(n={}))$t.call(n,e)&&pt(t,e,n[e]);if(dt)for(var e of dt(n))It.call(n,e)&&pt(t,e,n[e]);return t},Ee=(t,n)=>Mt(t,Ut(n));var Fe=(t,n,e)=>new Promise((s,o)=>{var v=m=>{try{E(e.next(m))}catch(f){o(f)}},l=m=>{try{E(e.throw(m))}catch(f){o(f)}},E=m=>m.done?s(m.value):Promise.resolve(m.value).then(v,l);E((e=e.apply(t,n)).next())});import{u as ce,r as le,t as re,y as Xe,z as Ht,A as Pt,B as Kt,D as ke,x as Nt,G as Gt,H as we,d as xt,I as Ie,k as Yt,C as Xt,J as U,K as $e,a as Wt,b as Ft,i as zt,O as jt,g as qt,e as Jt,f as Vt,h as Zt,F as Qt,N as en,M as ft,o as tn,j as nn}from"./useSync.hook-f458b547.js";import{x as ut,a4 as Dt,aH as on,af as F,cj as q,ck as J,cl as vt,ch as sn,cm as et,Q as an,cn as V,c7 as We,ag as rn,d as ie,bI as be,u as Le,a3 as P,o as S,h as z,j as lt,F as _e,A as me,ab as ve,aQ as se,f as c,a7 as pe,z as I,p as de,c as H,w,J as Se,bW as tt,bX as He,bY as nt,bZ as At,a2 as ct,y as Ke,ah as ht,O as he,r as B,co as un,a1 as Ne,q as Z,cp as gt,e as D,m as ge,t as ue,aG as ln,aT as cn,cq as Ce,cr as Pe,cs as dn,ci as pn,ct as fn,ai as vn,cu as hn,H as kt,N as _t,c1 as ze,V as je,W as qe,aX as gn,R as _n,cv as mn,cw as Cn,U as yn,aO as En,S as Be,c2 as Je}from"./index.js";import{u as it,d as Sn}from"./index-8a9a598a.js";import{a as wn,b as mt,l as Tn,g as xn}from"./plugin-105ea0f1.js";import{C as Fn}from"./index-580592f6.js";import{i as Te}from"./icon-8b67daef.js";import"./tables_list-33bcbabb.js";import"./index-39919acb.js";import"./index-4fea4944.js";const De=ce(),Dn=()=>{ut(()=>{De.setEditCanvas(le.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),De.setEditCanvas(le.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content"));const t=De.listenerScale();Dt(()=>{De.setEditCanvas(le.EDIT_LAYOUT_DOM,null),De.setEditCanvas(le.EDIT_CONTENT_DOM,null),t()})})};var bt={exports:{}};(function(t){(function(n){var e,s={},o={16:!1,18:!1,17:!1,91:!1},v="all",l={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},E={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},m=function(u){return E[u]||u.toUpperCase().charCodeAt(0)},f=[];for(e=1;e<20;e++)E["f"+e]=111+e;function _(u,p){for(var k=u.length;k--;)if(u[k]===p)return k;return-1}function d(u,p){if(u.length!=p.length)return!1;for(var k=0;k<u.length;k++)if(u[k]!==p[k])return!1;return!0}var a={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function r(u){for(e in o)o[e]=u[a[e]]}function g(u){var p,k,b,W,G,fe;if(p=u.keyCode,_(f,p)==-1&&f.push(p),(p==93||p==224)&&(p=91),p in o){o[p]=!0;for(b in l)l[b]==p&&(C[b]=!0);return}if(r(u),!!C.filter.call(this,u)&&p in s){for(fe=j(),W=0;W<s[p].length;W++)if(k=s[p][W],k.scope==fe||k.scope=="all"){G=k.mods.length>0;for(b in o)(!o[b]&&_(k.mods,+b)>-1||o[b]&&_(k.mods,+b)==-1)&&(G=!1);(k.mods.length==0&&!o[16]&&!o[18]&&!o[17]&&!o[91]||G)&&k.method(u,k)===!1&&(u.preventDefault?u.preventDefault():u.returnValue=!1,u.stopPropagation&&u.stopPropagation(),u.cancelBubble&&(u.cancelBubble=!0))}}}function h(u){var p=u.keyCode,k,b=_(f,p);if(b>=0&&f.splice(b,1),(p==93||p==224)&&(p=91),p in o){o[p]=!1;for(k in l)l[k]==p&&(C[k]=!1)}}function y(){for(e in o)o[e]=!1;for(e in l)C[e]=!1}function C(u,p,k){var b,W;b=i(u),k===void 0&&(k=p,p="all");for(var G=0;G<b.length;G++)W=[],u=b[G].split("+"),u.length>1&&(W=L(u),u=[u[u.length-1]]),u=u[0],u=m(u),u in s||(s[u]=[]),s[u].push({shortcut:b[G],scope:p,method:k,key:b[G],mods:W})}function M(u,p){var k,b,W=[],G,fe,xe;for(k=i(u),fe=0;fe<k.length;fe++){if(b=k[fe].split("+"),b.length>1&&(W=L(b),u=b[b.length-1]),u=m(u),p===void 0&&(p=j()),!s[u])return;for(G=0;G<s[u].length;G++)xe=s[u][G],xe.scope===p&&d(xe.mods,W)&&(s[u][G]={})}}function R(u){return typeof u=="string"&&(u=m(u)),_(f,u)!=-1}function A(){return f.slice(0)}function K(u){var p=(u.target||u.srcElement).tagName;return!(p=="INPUT"||p=="SELECT"||p=="TEXTAREA")}for(e in l)C[e]=!1;function X(u){v=u||"all"}function j(){return v||"all"}function $(u){var p,k,b;for(p in s)for(k=s[p],b=0;b<k.length;)k[b].scope===u?k.splice(b,1):b++}function i(u){var p;return u=u.replace(/\s/g,""),p=u.split(","),p[p.length-1]==""&&(p[p.length-2]+=","),p}function L(u){for(var p=u.slice(0,u.length-1),k=0;k<p.length;k++)p[k]=l[p[k]];return p}function N(u,p,k){u.addEventListener?u.addEventListener(p,k,!1):u.attachEvent&&u.attachEvent("on"+p,function(){k(window.event)})}N(document,"keydown",function(u){g(u)}),N(document,"keyup",h),N(window,"focus",y);var x=n.key;function O(){var u=n.key;return n.key=x,u}n.key=C,n.key.setScope=X,n.key.getScope=j,n.key.deleteScope=$,n.key.filter=K,n.key.isPressed=R,n.key.getPressedKeyCodes=A,n.key.noConflict=O,n.key.unbind=M,t.exports=C})(on)})(bt);var te=bt.exports;const ne=ce(),ae=t=>`${q.CTRL}+${t}`,Me=t=>`${q.SHIFT}+${t}`,Q={[F.ARROW_UP]:ae("up"),[F.ARROW_RIGHT]:ae("right"),[F.ARROW_DOWN]:ae("down"),[F.ARROW_LEFT]:ae("left"),[F.COPY]:ae("c"),[F.CUT]:ae("x"),[F.PARSE]:ae("v"),[F.DELETE]:"delete",[F.BACK]:ae("z"),[F.FORWORD]:ae(Me("z")),[F.GROUP]:ae("g"),[F.UN_GROUP]:ae(Me("g")),[F.LOCK]:ae("l"),[F.UNLOCK]:ae(Me("l")),[F.HIDE]:ae("h"),[F.SHOW]:ae(Me("h"))},oe=t=>`${J.CTRL}+${t}`,Ue=t=>`${J.SHIFT}+${t}`,ee={[F.ARROW_UP]:oe("arrowup"),[F.ARROW_RIGHT]:oe("arrowright"),[F.ARROW_DOWN]:oe("arrowdown"),[F.ARROW_LEFT]:oe("arrowleft"),[F.COPY]:oe("c"),[F.CUT]:oe("x"),[F.PARSE]:oe("v"),[F.DELETE]:oe("backspace"),[F.BACK]:oe("z"),[F.FORWORD]:oe(Ue("z")),[F.GROUP]:oe("g"),[F.UN_GROUP]:oe(Ue("g")),[F.LOCK]:oe("l"),[F.UNLOCK]:oe(Ue("l")),[F.HIDE]:oe("h"),[F.SHOW]:oe(Ue("h"))},An=[Q.up,Q.right,Q.down,Q.left,Q.delete,Q.copy,Q.cut,Q.parse,Q.back,Q.forward,Q.group,Q.unGroup,Q.lock,Q.unLock,Q.hide,Q.show],kn=[ee.up,ee.right,ee.down,ee.left,ee.delete,ee.copy,ee.cut,ee.parse,ee.back,ee.forward,ee.group,ee.unGroup,ee.lock,ee.unLock,ee.hide,ee.show],bn=()=>{window.$KeyboardActive={ctrl:!1,space:!1},document.onkeydown=t=>{const{keyCode:n}=t;if(n==32&&t.target==document.body&&t.preventDefault(),[17,32].includes(n)&&window.$KeyboardActive)switch(vt(t.keyCode),n){case 17:window.$KeyboardActive.ctrl=!0;break;case 32:window.$KeyboardActive.space=!0;break}},document.onkeyup=t=>{const{keyCode:n}=t;if(n==32&&t.target==document.body&&t.preventDefault(),[17,32].includes(n)&&window.$KeyboardActive)switch(vt(),n){case 17:window.$KeyboardActive.ctrl=!1;break;case 32:window.$KeyboardActive.space=!1;break}}},Ln=()=>{const n=(e,s)=>{switch(s){case e.up:te(s,re(()=>(ne.setMove(F.ARROW_UP),!1),50));break;case e.right:te(s,re(()=>(ne.setMove(F.ARROW_RIGHT),!1),50));break;case e.down:te(s,re(()=>(ne.setMove(F.ARROW_DOWN),!1),50));break;case e.left:te(s,re(()=>(ne.setMove(F.ARROW_LEFT),!1),50));break;case e.delete:te(s,Xe(()=>(ne.removeComponentList(),!1),50));break;case e.copy:te(s,Xe(()=>(ne.setCopy(),!1),50));break;case e.cut:te(s,Xe(()=>(ne.setCut(),!1),50));break;case e.parse:te(s,re(()=>(ne.setParse(),!1),50));break;case e.back:te(s,re(()=>(ne.setBack(),!1),50));break;case e.forward:te(s,re(()=>(ne.setForward(),!1),50));break;case e.group:te(s,re(()=>(ne.setGroup(),!1),50));break;case e.unGroup:te(s,re(()=>(ne.setUnGroup(),!1),50));break;case e.lock:te(s,re(()=>(ne.setLock(),!1),50));break;case e.unLock:te(s,re(()=>(ne.setUnLock(),!1),50));break;case e.hide:te(s,re(()=>(ne.setHide(),!1),50));break;case e.show:te(s,re(()=>(ne.setShow(),!1),50));break}};An.forEach(e=>{n(Q,e)}),kn.forEach(e=>{n(ee,e)}),bn()},T=ce(),{onClickOutSide:Rn}=it(),On=t=>Fe(void 0,null,function*(){t.preventDefault();try{wn();const n=t.dataTransfer.getData(sn.DRAG_KEY);if(!n){mt();return}T.setEditCanvas(le.IS_CREATE,!1);const e=et(n);let s,o;if(e.sourceID){let v=yield Ht(e.sourceID,e.category);if(!v){window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...");return}s=v.chartConfig,Pt(v,"design");const l=Kt(v.chartConfig);o=new l.default(v.chartConfig),o=ke.exports.merge({},o,v),o.id=an()}else o=yield Nt(e);V(o,t.offsetX-o.attr.w/2,t.offsetY-o.attr.h/2),T.addComponentList(o,!1,!0),T.setTargetSelectChart(o.id),mt()}catch(n){Tn(),window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...")}}),Ct=t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},Lt=(t,n)=>{if(n){T.setTargetSelectChart(n.id);return}T.setTargetSelectChart(void 0)},Bn=(t,n)=>{var f;if(t.which==2||(f=window.$KeyboardActive)!=null&&f.space)return;Lt();const e=t.offsetX,s=t.offsetY,o=t.screenX,v=t.screenY,l=T.getEditCanvas.scale;T.setMousePosition(void 0,void 0,e,s);const E=ke.exports.throttle(_=>{T.setTargetSelectChart(),T.setEditCanvas(le.IS_SELECT,!0);const d=e+_.screenX-o,a=s+_.screenY-v;T.setMousePosition(d,a);const r={x1:0,y1:0,x2:0,y2:0};d>e&&a>s?(r.x1=e,r.y1=s,r.x2=Math.round(e+(_.screenX-o)/l),r.y2=Math.round(s+(_.screenY-v)/l)):d>e&&a<s?(r.x1=e,r.y1=Math.round(s-(v-_.screenY)/l),r.x2=Math.round(e+(_.screenX-o)/l),r.y2=s):d<e&&a>s?(r.x1=Math.round(e-(o-_.screenX)/l),r.y1=s,r.x2=e,r.y2=Math.round(s+(_.screenY-v)/l)):(r.x1=Math.round(e-(o-_.screenX)/l),r.y1=Math.round(s-(v-_.screenY)/l),r.x2=e,r.y2=s),T.getComponentList.forEach(g=>{if(!T.getTargetChart.selectId.includes(g.id)){const{x:h,y,w:C,h:M}=g.attr,R={x1:h,y1:y,x2:h+C,y2:y+M};R.x1-r.x1>=0&&R.y1-r.y1>=0&&R.x2-r.x2<=0&&R.y2-r.y2<=0&&!g.status.lock&&!g.status.hide&&T.setTargetSelectChart(g.id,!0)}})},30),m=()=>{E.cancel(),T.setEditCanvas(le.IS_SELECT,!1),T.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",m)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",m)},Rt=()=>({mouseClickHandle:(o,v)=>{var l;if(o.preventDefault(),o.stopPropagation(),!v.status.lock&&(l=window.$KeyboardActive)!=null&&l.ctrl)if(T.targetChart.selectId.includes(v.id)){const E=T.targetChart.selectId.filter(m=>m!==v.id);T.setTargetSelectChart(E)}else T.setTargetSelectChart(v.id,!0)},mousedownHandle:(o,v)=>{var y;if(o.preventDefault(),o.stopPropagation(),v.status.lock||(Rn(),o.buttons===We.LEFT&&((y=window.$KeyboardActive)==null?void 0:y.ctrl)))return;const l=T.getTargetChart.selectId;if(o.buttons===We.RIGHT&&l.length>1&&l.includes(v.id)||(T.setTargetSelectChart(v.id),o.buttons===We.RIGHT))return;const E=T.getEditCanvas.scale,m=T.getEditCanvasConfig.width,f=T.getEditCanvasConfig.height,_=new Map;T.getTargetChart.selectId.forEach(C=>{const M=T.fetchTargetIndex(C);if(M!==-1){const{x:R,y:A,w:K,h:X}=rn(T.getComponentList[M]).attr;_.set(C,{x:R,y:A,w:K,h:X})}});const d=o.screenX,a=o.screenY;let r=[];T.getTargetChart.selectId.forEach(C=>{if(!_.has(C))return;const M=T.fetchTargetIndex(C);r.push(ke.exports.cloneDeep(T.getComponentList[M]))}),T.setMousePosition(void 0,void 0,d,a);const g=ke.exports.throttle(C=>{T.setEditCanvas(le.IS_DRAG,!0),T.setMousePosition(C.screenX,C.screenY);let M=(C.screenX-d)/E,R=(C.screenY-a)/E;T.getTargetChart.selectId.forEach(A=>{if(!_.has(A))return;const K=T.fetchTargetIndex(A),{x:X,y:j,w:$,h:i}=_.get(A),L=T.getComponentList[K];let N=Math.round(X+M),x=Math.round(j+R);const O=50;N=N<-$+O?-$+O:N,x=x<-i+O?-i+O:x,N=N>m-O?m-O:N,x=x>f-O?f-O:x,L&&!Number.isNaN(N)&&!Number.isNaN(x)&&(L.attr=Object.assign(L.attr,{x:N,y:x}))})},20),h=()=>{try{T.setMousePosition(0,0,0,0),T.setEditCanvas(le.IS_DRAG,!1),r.length&&(T.getTargetChart.selectId.forEach(C=>{if(!_.has(C))return;const M=T.fetchTargetIndex(C),R=T.getComponentList[M];r.forEach(A=>{A.id===C&&(A.attr=Object.assign(A.attr,{offsetX:R.attr.x-A.attr.x,offsetY:R.attr.y-A.attr.y}))})}),T.moveComponentList(r)),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)}catch(C){console.log(C)}};document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)},mouseenterHandle:(o,v)=>{o.preventDefault(),o.stopPropagation(),T.getEditCanvas.isSelect||T.setTargetHoverChart(v.id)},mouseleaveHandle:(o,v)=>{o.preventDefault(),o.stopPropagation(),T.setEditCanvas(le.IS_DRAG,!1),T.setTargetHoverChart(void 0)}}),Mn=(t,n,e)=>{t.stopPropagation(),t.preventDefault(),T.setEditCanvas(le.IS_DRAG,!0);const s=T.getEditCanvas.scale,o=e.x,v=e.y,l=e.w,E=e.h,m=e.lockScale,f=e.scaleRatio,_=e.minWidth,d=t.screenX,a=t.screenY,r=l-_;T.setMousePosition(d,a);const g=ke.exports.throttle(y=>{T.setMousePosition(y.screenX,y.screenY);let C=Math.round((y.screenX-d)/s),M=Math.round((y.screenY-a)/s);const R=/t/.test(n),A=/b/.test(n),K=/l/.test(n),X=/r/.test(n);let j=E+(R?-M:A?M:0),$=l+(K?-C:X?C:0);m&&((R||A)&&($=Math.round(j*f)),(K||X)&&(j=Math.round($/f))),K&&($<_&&r>0&&(C=r),r===0&&C>0&&(C=0)),e.h=j>0?j:0,e.w=$>0?$:0,e.x=o+(K?C:0),e.y=v+(R?M:0)},50),h=()=>{T.setEditCanvas(le.IS_DRAG,!1),T.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)};const Un=["onMousedown"],$n=ie({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(t){be(d=>({"026d39a0":l.value}));const n=t,e=Le(),s=ce(),o=["t","r","b","l","lt","rt","lb","rb"],v=["n","e","s","w","nw","ne","sw","se"],l=P(()=>e.getAppTheme),E=P(()=>n.item.status.lock?!1:n.item.id===s.getTargetChart.hoverId),m=P(()=>{const d=n.item.id;return n.item.status.lock?!1:s.getTargetChart.selectId.find(a=>a===d)}),f=P(()=>n.item.status.lock),_=P(()=>n.item.status.hide);return(d,a)=>(S(),z("div",{class:ve(["go-shape-box",{lock:f.value,hide:_.value}])},[lt(d.$slots,"default",{},void 0,!0),t.hiddenPoint?pe("",!0):(S(!0),z(_e,{key:0},me(m.value?o:[],(r,g)=>(S(),z("div",{class:ve(`shape-point ${r}`),key:g,style:se(c(Gt)(r,g,t.item.attr,v)),onMousedown:h=>c(Mn)(h,r,t.item.attr)},null,46,Un))),128)),I("div",{class:"shape-modal",style:se(c(we)(t.item.attr))},[I("div",{class:ve(["shape-modal-select",{active:m.value}])},null,2),I("div",{class:ve(["shape-modal-change",{selectActive:m.value,hoverActive:E.value}])},null,2)],4)],2))}});var ot=de($n,[["__scopeId","data-v-5f8854aa"]]);const In={class:"go-edit-group-box"},Hn=ie({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(t){const n=ce(),{handleContextMenu:e}=it(),{mouseenterHandle:s,mouseleaveHandle:o,mousedownHandle:v,mouseClickHandle:l}=Rt(),E=(_,d,a)=>{const r=g=>d.filter(h=>g.includes(h.key));if(n.getTargetChart.selectId.length>1)return r([F.GROUP,F.DELETE]);{const g=[];a.status.lock?g.push(F.LOCK):g.push(F.UNLOCK),a.status.hide?g.push(F.HIDE):g.push(F.SHOW);const h=[F.UN_GROUP];return[...r(h),Sn(),..._.filter(y=>!g.includes(y.key))]}},m=P(()=>{const _=n.getEditCanvasConfig.chartThemeColor;return xt[_]}),f=P(()=>n.getEditCanvasConfig.chartThemeSetting);return(_,d)=>(S(),z("div",In,[(S(),H(c(ot),{key:t.groupData.id,"data-id":t.groupData.id,index:t.groupIndex,item:t.groupData,hiddenPoint:!0,class:ve(c(tt)(t.groupData.styles.animations)),style:se(Y(Y(Y(Y(Y({},c(Ie)(t.groupData.attr,t.groupIndex)),c(we)(t.groupData.attr)),c(He)(t.groupData.styles)),c(nt)(t.groupData.styles)),c(At)(t.groupData.styles))),onClick:d[0]||(d[0]=a=>c(l)(a,t.groupData)),onMousedown:d[1]||(d[1]=a=>c(v)(a,t.groupData)),onMouseenter:d[2]||(d[2]=a=>c(s)(a,t.groupData)),onMouseleave:d[3]||(d[3]=a=>c(o)(a,t.groupData)),onContextmenu:d[4]||(d[4]=a=>c(e)(a,t.groupData,E))},{default:w(()=>[(S(!0),z(_e,null,me(t.groupData.groupList,a=>(S(),H(c(ot),{key:a.id,"data-id":a.id,index:t.groupIndex,item:a,hiddenPoint:!0,style:se(Y({},c(Ie)(a.attr,t.groupIndex)))},{default:w(()=>[(S(),H(Se(a.chartConfig.chartKey),{class:ve(["edit-content-chart",c(tt)(a.styles.animations)]),chartConfig:a,themeSetting:f.value,themeColor:m.value,style:se(Y(Y(Y({},c(we)(a.attr)),c(He)(a.styles)),c(nt)(a.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}});const Pn={class:"go-edit-align-line"},Kn=ie({__name:"index",setup(t){be(g=>({"32d4d33a":l.value}));const n=Le(),e=ce(),s=ct(),o=Ke({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),v=g=>g?{left:`${g.x?g.x:0}px`,top:`${g.y?g.y:0}px`}:{},l=P(()=>n.getAppTheme),E=P(()=>s.getChartAlignRange),m=P(()=>e.getEditCanvas[le.IS_DRAG]),f=(g,h)=>Math.abs(g-h)<=E.value,_=P(()=>e.getTargetChart.selectId),d=P(()=>e.getComponentList[e.fetchTargetIndex()]),a=P(()=>{var g;return((g=d.value)==null?void 0:g.attr)||{}}),r=P(()=>({id:"0",attr:{w:ht(e.getEditCanvasConfig.width),h:ht(e.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0,scaleRatio:1.5,lockScale:!1,disabledHeight:!1,minWidth:50}}));return he(()=>e.getMousePosition,re(()=>{try{if(!m.value||_.value.length!==1)return;const g=a.value.w,h=a.value.h,y=a.value.x,C=y+g/2,M=y+g,R=[y,C,M],A=a.value.y,K=A+h/2,X=A+h,j=[A,K,X];o.select.clear(),o.sorptioned.y=!1;const $=e.getComponentList.map(i=>({id:i.id,attr:i.attr}));$.push(r.value),o.lineArr.forEach(i=>{$.forEach(L=>{if(_.value[0]===L.id)return;const N=L.attr.w,x=L.attr.h,O=L.attr.x,u=O+N/2,p=O+N,k=[O,u,p],b=L.attr.y,W=b+x/2,G=b+x,fe=[b,W,G];i.includes("rowt")&&(f(A,b)&&(o.select.set(i,{y:b}),V(d.value,y,b)),f(A,W)&&(o.select.set(i,{y:W}),V(d.value,y,W)),f(A,G)&&(o.select.set(i,{y:G}),V(d.value,y,G))),i.includes("rowc")&&(f(K,b)&&(o.select.set(i,{y:b}),V(d.value,y,b-h/2)),f(K,W)&&(o.select.set(i,{y:W}),V(d.value,y,W-h/2)),f(K,G)&&(o.select.set(i,{y:G}),V(d.value,y,G-h/2))),i.includes("rowb")&&(f(X,b)&&(o.select.set(i,{y:b}),V(d.value,y,b-h)),f(X,W)&&(o.select.set(i,{y:W}),V(d.value,y,W-h)),f(X,G)&&(o.select.set(i,{y:G}),V(d.value,y,G-h))),i.includes("coll")&&(f(y,O)&&(o.select.set(i,{x:O}),V(d.value,O,A)),f(y,u)&&(o.select.set(i,{x:u}),V(d.value,u,A)),f(y,p)&&(o.select.set(i,{x:p}),V(d.value,p,A))),i.includes("colc")&&(f(C,O)&&(o.select.set(i,{x:O}),V(d.value,O-g/2,A)),f(C,u)&&(o.select.set(i,{x:u}),V(d.value,u-g/2,A)),f(C,p)&&(o.select.set(i,{x:p}),V(d.value,p-g/2,A))),i.includes("colr")&&(f(M,O)&&(o.select.set(i,{x:O}),V(d.value,O-g,A)),f(M,u)&&(o.select.set(i,{x:u}),V(d.value,u-g,A)),f(M,p)&&(o.select.set(i,{x:p}),V(d.value,p-g,A)))})})}catch(g){console.log(g)}},200),{deep:!0}),he(()=>m.value,g=>{g||(o.select.clear(),o.sorptioned.y=!1)}),(g,h)=>(S(),z("div",Pn,[(S(!0),z(_e,null,me(o.lineArr,y=>(S(),z("div",{class:ve(["line",[y.includes("row")?"row":"col",o.select.has(y)&&"visible"]]),key:y,style:se(v(o.select.get(y)))},null,6))),128))]))}});var Nn=de(Kn,[["__scopeId","data-v-41123ead"]]);const Gn=ie({__name:"index",setup(t){return(n,e)=>{const s=B("n-watermark");return S(),H(s,{id:"go-edit-watermark",content:c(un),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});var Yn=de(Gn,[["__scopeId","data-v-e5cd93da"]]);const Xn=ie({__name:"index",setup(t){be(E=>({bb49f51e:v.value}));const n=Le(),e=ce(),{isSelect:s,scale:o}=Ne(e.getEditCanvas),v=P(()=>n.getAppTheme),l=Z();return he(()=>e.getMousePosition,E=>{if(!s.value)return;const{startX:m,startY:f,x:_,y:d}=E,a={zIndex:gt,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0,lockScale:!1,scaleRatio:1.5,disabledHeight:!1,minWidth:50};_>m&&d>f?(a.x=m,a.y=f,a.w=Math.round((_-m)/o.value),a.h=Math.round((d-f)/o.value)):_>m&&d<f?(a.x=m,a.w=Math.round((_-m)/o.value),a.h=Math.round((f-d)/o.value),a.y=f-a.h):_<m&&d>f?(a.y=f,a.w=Math.round((m-_)/o.value),a.h=Math.round((d-f)/o.value),a.x=m-a.w):(a.w=Math.round((m-_)/o.value),a.h=Math.round((f-d)/o.value),a.x=m-a.w,a.y=f-a.h),l.value=Y(Y({},Ie(a,gt)),we(a))},{deep:!0}),(E,m)=>c(s)?(S(),z("div",{key:0,class:"go-edit-select",style:se(l.value)},m[0]||(m[0]=[I("div",{class:"select-background"},null,-1),I("div",{class:"select-border"},null,-1)]),4)):pe("",!0)}});var Wn=de(Xn,[["__scopeId","data-v-6aae2e54"]]);const zn=ie({__name:"index",setup(t){const n=ce(),{getEditCanvasConfig:e,getEditCanvas:s}=Ne(n),o=P(()=>({w:e.value.width,h:e.value.height})),v=P(()=>{const E={transform:`scale(${s.value.scale})`};return Y(Y({},we(o.value)),E)}),l=P(()=>{const E=s.value.isCreate&&{"z-index":99999};return Y(Y({},we(o.value)),E)});return(E,m)=>(S(),z("div",{class:"go-edit-range go-transition",style:se(v.value),onMousedown:m[0]||(m[0]=f=>c(Bn)(f,void 0))},[lt(E.$slots,"default",{},void 0,!0),D(c(Yn)),D(c(Nn)),D(c(Wn)),I("div",{class:"go-edit-range-model",style:se(l.value)},null,4)],36))}});var jn=de(zn,[["__scopeId","data-v-52e445d0"]]),Ot=!!(typeof window!="undefined"&&window.document&&window.document.createElement),st=!1,at=!1;try{var Ve={get passive(){return st=!0},get once(){return at=st=!0}};Ot&&(window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,!0))}catch(t){}function qn(t,n,e,s){if(s&&typeof s!="boolean"&&!at){var o=s.once,v=s.capture,l=e;!at&&o&&(l=e.__once||function E(m){this.removeEventListener(n,E,v),e.call(this,m)},e.__once=l),t.addEventListener(n,l,st?s:v)}t.addEventListener(n,e,s)}function Jn(t,n,e,s){var o=s&&typeof s!="boolean"?s.capture:s;t.removeEventListener(n,e,o),e.__once&&t.removeEventListener(n,e.__once,o)}function yt(t,n,e,s){return qn(t,n,e,s),function(){Jn(t,n,e,s)}}var Et=new Date().getTime();function Vn(t){var n=new Date().getTime(),e=Math.max(0,16-(n-Et)),s=setTimeout(t,e);return Et=n,s}var Zn=["","webkit","moz","o","ms"],St=Vn,wt=function(n,e){return n+(n?e[0].toUpperCase()+e.substr(1):e)+"AnimationFrame"};Ot&&Zn.some(function(t){var n=wt(t,"request");return n in window&&(wt(t,"cancel"),St=function(s){return window[n](s)}),!!St});Function.prototype.bind.call(Function.prototype.call,[].slice);Function.prototype.bind.call(Function.prototype.call,[].slice);const Qn={class:"go-sketch-rule"},eo={key:1,class:"fix-edit-screens-block"},Ze=20,to=ie({__name:"index",setup(t){be(x=>({"0c493a2c":K.value,"57d4e729":d.value}));const n=ce(),e=Yt(),s=Le();let o=[0,0],v=[0,0];const l=Z(),E=Z(!0),m=Z(),f=Z(),_=Z(!1),d=Z("auto"),{width:a,height:r}=Ne(n.getEditCanvasConfig),g=Z(0),h=Z(0),y=Ke({h:[],v:[]}),C=P(()=>n.getEditCanvas.scale),M=P(()=>a.value*2),R=P(()=>r.value*2),A=P(()=>s.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),K=P(()=>s.getAppTheme),X=x=>{if(x.ctrlKey||x.metaKey){x.preventDefault();let O=C.value;if(x.wheelDelta>=0&&C.value<2){O=C.value+.05,n.setScale(O);return}x.wheelDelta<0&&C.value>.1&&(O=C.value-.05,n.setScale(O))}},j=()=>{if(!l.value)return;const x=l.value.getBoundingClientRect(),O=m.value.getBoundingClientRect();g.value=(x.left+Ze-O.left)/C.value,h.value=(x.top+Ze-O.top)/C.value},$=x=>{var b,W;if(x.preventDefault(),x.stopPropagation(),x.which==2)_.value=!0;else if(!((b=window.$KeyboardActive)!=null&&b.space))return;(W=document.activeElement)==null||W.blur();const O=x.pageX,u=x.pageY,p=yt(window,"mousemove",G=>{const fe=G.pageX-O,xe=G.pageY-u,[Ge,Re]=o,[Ye,Oe]=v;o=[Re,fe],v=[Oe,xe],l.value.scrollLeft-=Re>Ge?Math.abs(Re-Ge):-Math.abs(Re-Ge),l.value.scrollTop-=Oe>Ye?Math.abs(Oe-Ye):-Math.abs(Oe-Ye)}),k=yt(window,"mouseup",()=>{p(),k(),o=[0,0],v=[0,0],_.value=!1})},i=()=>{const x=document.getElementById("go-chart-edit-layout");return x?{height:x.clientHeight-25,width:x.clientWidth}:{width:a.value,height:r.value}},L=()=>{E.value=!1,setTimeout(()=>{E.value=!0},10)},N=()=>{const{width:x,height:O}=i();l.value.scrollLeft=M.value/2-x/2,l.value.scrollTop=R.value/2-O/2};return he(()=>M.value,()=>{N(),n.computedScale()}),he(()=>s.getDarkTheme,()=>{L()}),he(()=>C.value,(x,O)=>{O!==x?(e.setItemUnHandle(Xt.RE_POSITION_CANVAS,!1),j(),setTimeout(()=>{N(),L()},400)):re(L,20)}),he(()=>_.value,x=>{d.value=x?"grab":"auto"}),ut(()=>{l.value&&(l.value.addEventListener("wheel",X,{passive:!1}),N())}),Dt(()=>{l.value&&l.value.removeEventListener("wheel",X)}),window.onKeySpacePressHold=x=>{_.value=x},(x,O)=>{const u=B("sketch-rule");return S(),z("div",Qn,[E.value?(S(),H(u,{key:0,thick:Ze,scale:C.value,width:i().width,height:i().height,startX:g.value,startY:h.value,lines:y,palette:A.value},null,8,["scale","width","height","startX","startY","lines","palette"])):pe("",!0),I("div",{ref_key:"$app",ref:l,class:"edit-screens",onScroll:j},[I("div",{ref_key:"$container",ref:f,class:"edit-screen-container",style:se({width:M.value+"px",height:R.value+"px"})},[I("div",{ref_key:"refSketchRuleBox",ref:m,class:"canvas",onMousedown:$,style:se({marginLeft:"-"+(i().width/2-25)+"px"})},[I("div",{style:se({pointerEvents:_.value?"none":"auto"})},[lt(x.$slots,"default",{},void 0,!0)],4)],36)],4)],544),c(s).getDarkTheme?(S(),z("div",eo)):pe("",!0)])}}});var no=de(to,[["__scopeId","data-v-2f924d76"]]);const Qe={[U.ADD]:"\u65B0\u589E",[U.DELETE]:"\u5220\u9664",[U.UPDATE]:"\u66F4\u65B0",[U.MOVE]:"\u79FB\u52A8",[U.PASTE]:"\u7C98\u8D34",[U.COPY]:"\u590D\u5236",[U.CUT]:"\u526A\u5207",[U.TOP]:"\u7F6E\u9876",[U.BOTTOM]:"\u7F6E\u5E95",[U.UP]:"\u4E0A\u79FB",[U.DOWN]:"\u4E0B\u79FB",[U.GROUP]:"\u6210\u7EC4",[U.UN_GROUP]:"\u89E3\u7EC4",[U.LOCK]:"\u9501\u5B9A",[U.UNLOCK]:"\u89E3\u9501",[U.HIDE]:"\u9690\u85CF",[U.SHOW]:"\u663E\u793A",[$e.CANVAS]:"\u753B\u5E03\u521D\u59CB\u5316"};var oo=Array.prototype,so=oo.reverse;function ao(t){return t==null?t:so.call(t)}var ro=ao;const uo={class:"go-flex-items-center"},lo={class:"history-list-box"},co=["title"],io=ie({__name:"index",setup(t){const{DesktopOutlineIcon:n,PencilIcon:e,TrashIcon:s,CopyIcon:o,LayersIcon:v,DuplicateIcon:l,HelpOutlineIcon:E,LockClosedOutlineIcon:m,LockOpenOutlineIcon:f,EyeOffOutlineIcon:_,EyeOutlineIcon:d}=Te.ionicons5,{StackedMoveIcon:a,Carbon3DCursorIcon:r,Carbon3DSoftwareIcon:g}=Te.carbon,h=Wt(),y=R=>{if(R.targetType===$e.CANVAS)return n;switch(R.actionType){case U.UPDATE:return e;case U.DELETE:return s;case U.PASTE:return o;case U.TOP:return v;case U.BOTTOM:return v;case U.UP:return v;case U.DOWN:return v;case U.MOVE:return a;case U.ADD:return l;case U.GROUP:return r;case U.UN_GROUP:return g;case U.LOCK:return m;case U.UNLOCK:return f;case U.HIDE:return _;case U.SHOW:return d;default:return e}},C=R=>{if(R.targetType===$e.CANVAS)return Qe[$e.CANVAS];if(R.actionType===U.GROUP||R.actionType===U.UN_GROUP)return`${Qe[R.actionType]}`;if(R.historyData.length)return`${Qe[R.actionType]} - ${R.historyData[0].chartConfig.title}`},M=P(()=>{const A=h.getBackStack.map(K=>({label:C(K),icon:y(K)}));return ro(A.filter(K=>K.label))});return(R,A)=>{const K=B("n-button"),X=B("n-icon"),j=B("n-text"),$=B("n-scrollbar"),i=B("n-popover"),L=B("n-tooltip");return S(),z("div",uo,[D(i,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:w(()=>[D(K,{class:"mr-10",secondary:"",size:"small",disabled:M.value.length===0},{default:w(()=>A[0]||(A[0]=[I("span",{class:"btn-text"},"\u5386\u53F2\u8BB0\u5F55",-1)])),_:1,__:[0]},8,["disabled"])]),default:w(()=>[I("div",lo,[D($,{style:{"max-height":"500px"}},{default:w(()=>[(S(!0),z(_e,null,me(M.value,(N,x)=>(S(),z("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:x,title:N.label},[D(X,{class:"item-icon",size:"16",depth:2,component:N.icon},null,8,["component"]),D(j,{depth:"2"},{default:w(()=>[ge(ue(N.label),1)]),_:2},1024)],8,co))),128))]),_:1}),A[1]||(A[1]=I("div",{class:"popover-modal"},null,-1))])]),_:1}),D(L,{trigger:"hover"},{trigger:w(()=>[D(X,{size:"21",depth:3},{default:w(()=>[D(c(E))]),_:1})]),default:w(()=>[I("span",null,"\u6700\u591A\u53EA\u4FDD\u7559"+ue(c(ln))+"\u6761\u8BB0\u5F55",1)]),_:1})])}}});var po=de(io,[["__scopeId","data-v-5a4fd660"]]);const fo={key:0},vo={key:1},ho=ie({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(t,{emit:n}){const{CloseIcon:e}=Te.ionicons5,s=Z(!1),o=n,v=t;he(()=>v.modelShow,m=>{s.value=m});const l=[{label:"\u62D6\u62FD\u753B\u5E03",win:`${q.SPACE.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${J.SPACE.toUpperCase()} + \u{1F5B1}\uFE0F `,macSource:!0},{label:"\u5411 \u4E0A/\u53F3/\u4E0B/\u5DE6 \u79FB\u52A8",win:`${q.CTRL.toUpperCase()} + \u2191 \u6216 \u2192 \u6216 \u2193 \u6216 \u2190`,mac:`${J.CTRL.toUpperCase()} + \u2191 `},{label:"\u9501\u5B9A",win:`${q.CTRL.toUpperCase()} + L `,mac:`${J.CTRL.toUpperCase()} + L `},{label:"\u89E3\u9501",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()}+ L `,mac:`${J.CTRL.toUpperCase()} + ${J.SHIFT.toUpperCase()} + L `},{label:"\u5C55\u793A",win:`${q.CTRL.toUpperCase()} + H `,mac:`${J.CTRL.toUpperCase()} + H `},{label:"\u9690\u85CF",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()} + H `,mac:`${J.CTRL.toUpperCase()} + ${J.SHIFT.toUpperCase()} + H `},{label:"\u5220\u9664",win:"Delete".toUpperCase(),mac:`${J.CTRL.toUpperCase()} + Backspace `},{label:"\u590D\u5236",win:`${q.CTRL.toUpperCase()} + C `,mac:`${J.CTRL.toUpperCase()} + C `},{label:"\u526A\u5207",win:`${q.CTRL.toUpperCase()} + X `,mac:`${J.CTRL.toUpperCase()} + X `},{label:"\u7C98\u8D34",win:`${q.CTRL.toUpperCase()} + V `,mac:`${J.CTRL.toUpperCase()} + V `},{label:"\u540E\u9000",win:`${q.CTRL.toUpperCase()} + Z `,mac:`${J.CTRL.toUpperCase()} + Z `},{label:"\u524D\u8FDB",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()} + Z `,mac:`${J.CTRL.toUpperCase()} + ${J.SHIFT.toUpperCase()} + Z `},{label:"\u591A\u9009",win:`${q.CTRL.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${J.CTRL_SOURCE_KEY.toUpperCase()} + \u{1F5B1}\uFE0F `},{label:"\u521B\u5EFA\u5206\u7EC4",win:`${q.CTRL.toUpperCase()} + G / \u{1F5B1}\uFE0F `,mac:`${J.CTRL_SOURCE_KEY.toUpperCase()} + G / \u{1F5B1}\uFE0F`},{label:"\u89E3\u9664\u5206\u7EC4",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()} + G `,mac:`${J.CTRL_SOURCE_KEY.toUpperCase()} + ${q.SHIFT.toUpperCase()} + G `}],E=()=>{o("update:modelShow",!1)};return(m,f)=>{const _=B("n-icon"),d=B("n-space"),a=B("n-gradient-text"),r=B("n-table"),g=B("n-modal");return S(),H(g,{show:s.value,"onUpdate:show":f[0]||(f[0]=h=>s.value=h),"mask-closable":!0,onAfterLeave:E},{default:w(()=>[D(r,{class:"model-content",bordered:!1,"single-line":!1},{default:w(()=>[I("thead",null,[I("tr",null,[f[2]||(f[2]=I("th",null,"\u529F\u80FD",-1)),f[3]||(f[3]=I("th",null,"Win \u5FEB\u6377\u952E",-1)),I("th",null,[D(d,{justify:"space-between"},{default:w(()=>[f[1]||(f[1]=I("span",null," Mac \u5FEB\u6377\u952E ",-1)),D(_,{size:"20",class:"go-cursor-pointer",onClick:E},{default:w(()=>[D(c(e))]),_:1})]),_:1,__:[1]})])])]),I("tbody",null,[(S(),z(_e,null,me(l,(h,y)=>I("tr",{key:y},[I("td",null,ue(h.label),1),I("td",null,ue(h.win),1),h.macSource?(S(),z("td",fo,ue(h.mac),1)):(S(),z("td",vo,[D(a,{size:22},{default:w(()=>[ge(ue(h.mac.substr(0,1)),1)]),_:2},1024),ge(" + "+ue(h.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});var go=de(ho,[["__scopeId","data-v-3c7b6730"]]);const _o={class:"go-edit-shortcut"},mo=ie({__name:"index",setup(t){const n=Z(!1);return(e,s)=>{const o=B("n-button");return S(),z("div",_o,[D(go,{modelShow:n.value,"onUpdate:modelShow":s[0]||(s[0]=v=>n.value=v)},null,8,["modelShow"]),D(o,{class:"scale-btn",onClick:s[1]||(s[1]=v=>n.value=!0)},{default:w(()=>s[2]||(s[2]=[ge(" \u5FEB\u6377\u952E")])),_:1,__:[2]})])}}});var Co=de(mo,[["__scopeId","data-v-2a5a05ce"]]);const yo={class:"go-edit-bottom"},Eo=ie({__name:"index",setup(t){be(y=>({f3add9fc:o.value}));const{LockClosedOutlineIcon:n,LockOpenOutlineIcon:e}=Te.ionicons5,s=Le(),o=Z(s.getAppTheme),v=ce(),{lockScale:l,scale:E}=Ne(v.getEditCanvas);let m=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"\u81EA\u9002\u5E94",value:0}];const f=Z(""),_=y=>{if(y===0){v.computedScale();return}v.setScale(y/100)},d=()=>{v.setEditCanvas(le.LOCK_SCALE,!l.value)},a=Z(100),r=y=>`${y}%`,g=y=>{v.setScale(y/100)},h=Ke({100:""});return cn(()=>{const y=(E.value*100).toFixed(0);f.value=`${y}%`,a.value=parseInt(y)}),(y,C)=>{const M=B("n-text"),R=B("n-space"),A=B("n-select"),K=B("n-icon"),X=B("n-button"),j=B("n-tooltip"),$=B("n-slider");return S(),z("div",yo,[D(R,null,{default:w(()=>[D(c(po)),D(M,{id:"keyboard-dress-show",depth:"3"})]),_:1}),D(R,{class:"bottom-ri"},{default:w(()=>[D(Co),D(A,{disabled:c(l),class:"scale-btn",value:f.value,"onUpdate:value":[C[0]||(C[0]=i=>f.value=i),_],size:"mini",options:c(m)},null,8,["disabled","value","options"]),D(j,{trigger:"hover"},{trigger:w(()=>[D(X,{onClick:d,text:""},{default:w(()=>[D(K,{class:ve(["lock-icon",{color:c(l)}]),size:"18",depth:2},{default:w(()=>[c(l)?(S(),H(c(n),{key:0})):(S(),H(c(e),{key:1}))]),_:1},8,["class"])]),_:1})]),default:w(()=>[I("span",null,ue(c(l)?"\u89E3\u9501":"\u9501\u5B9A")+"\u5F53\u524D\u6BD4\u4F8B",1)]),_:1}),D($,{class:"scale-slider",value:a.value,"onUpdate:value":[C[1]||(C[1]=i=>a.value=i),g],"default-value":50,min:10,max:200,step:5,"format-tooltip":r,disabled:c(l),marks:h},null,8,["value","disabled","marks"])]),_:1})])}}});var So=de(Eo,[["__scopeId","data-v-99a534fc"]]);const wo=ie({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow"],setup(t,{emit:n}){const e=t,s=n,{HelpOutlineIcon:o,CloseIcon:v}=Te.ionicons5,l=ct(),E=Z(!1),m=Ke([{key:Ce.ASIDE_ALL_COLLAPSED,value:l.getAsideAllCollapsed,type:"switch",name:"\u83DC\u5355\u6298\u53E0",desc:"\u9996\u9875\u83DC\u5355\u6298\u53E0\u65F6\u9690\u85CF\u81F3\u754C\u9762\u5916"},{key:Ce.HIDE_PACKAGE_ONE_CATEGORY,value:l.getHidePackageOneCategory,type:"switch",name:"\u9690\u85CF\u5206\u7C7B",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u8868\u5355\u5206\u7C7B\u53EA\u6709\u5355\u9879\u65F6\u9690\u85CF"},{key:Ce.CHANGE_LANG_RELOAD,value:l.getChangeLangReload,type:"switch",name:"\u5207\u6362\u8BED\u8A00",desc:"\u5207\u6362\u8BED\u8A00\u91CD\u65B0\u52A0\u8F7D\u9875\u9762",tip:"\u82E5\u9047\u5230\u90E8\u5206\u533A\u57DF\u8BED\u8A00\u5207\u6362\u5931\u8D25\uFF0C\u5219\u5EFA\u8BAE\u5F00\u542F"},{key:"divider1",type:"divider",name:"",desc:"",value:""},{key:Ce.CHART_TOOLS_STATUS_HIDE,value:l.getChartToolsStatusHide,type:"switch",name:"\u9690\u85CF\u5DE5\u5177\u680F",desc:"\u9F20\u6807\u79FB\u5165\u65F6\uFF0C\u4F1A\u5C55\u793A\u5207\u6362\u5230\u5C55\u5F00\u6A21\u5F0F"},{key:Ce.CHART_TOOLS_STATUS,value:l.getChartToolsStatus,type:"select",name:"\u5DE5\u5177\u680F\u5C55\u793A",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u5DE5\u5177\u680F\u5C55\u793A\u65B9\u5F0F",options:[{label:"\u4FA7\u8FB9\u680F",value:Pe.ASIDE},{label:"\u5E95\u90E8 Dock",value:Pe.DOCK}]},{key:"divider0",type:"divider",name:"",desc:"",value:""},{key:Ce.CHART_MOVE_DISTANCE,value:l.getChartMoveDistance,type:"number",name:"\u79FB\u52A8\u8DDD\u79BB",min:1,step:1,suffix:"px",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u65B9\u5411\u952E\u63A7\u5236\u79FB\u52A8\u8DDD\u79BB"},{key:Ce.CHART_ALIGN_RANGE,value:l.getChartAlignRange,type:"number",name:"\u5438\u9644\u8DDD\u79BB",min:10,step:2,suffix:"px",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u79FB\u52A8\u56FE\u8868\u65F6\u7684\u5438\u9644\u8DDD\u79BB"}]);he(()=>e.modelShow,d=>{E.value=d});const f=()=>{s("update:modelShow",!1)},_=(d,a)=>{l.setItem(a.key,a.value)};return(d,a)=>{const r=B("n-h3"),g=B("n-icon"),h=B("n-space"),y=B("n-divider"),C=B("n-text"),M=B("n-switch"),R=B("n-input-number"),A=B("n-select"),K=B("n-tooltip"),X=B("n-list-item"),j=B("n-list"),$=B("n-modal");return S(),H($,{show:E.value,"onUpdate:show":a[0]||(a[0]=i=>E.value=i),onAfterLeave:f},{default:w(()=>[D(j,{bordered:"",class:"go-system-setting"},{header:w(()=>[D(h,{justify:"space-between"},{default:w(()=>[D(r,{class:"go-mb-0"},{default:w(()=>a[1]||(a[1]=[ge("\u7CFB\u7EDF\u8BBE\u7F6E")])),_:1,__:[1]}),D(g,{size:"20",class:"go-cursor-pointer",onClick:f},{default:w(()=>[D(c(v))]),_:1})]),_:1})]),default:w(()=>[(S(!0),z(_e,null,me(m,i=>(S(),H(X,{key:i.key},{default:w(()=>[i.type==="divider"?(S(),H(y,{key:0,style:{margin:"0"}})):(S(),H(h,{key:1,size:40},{default:w(()=>[D(h,null,{default:w(()=>[D(C,{class:"item-left"},{default:w(()=>[ge(ue(i.name),1)]),_:2},1024),i.type==="switch"?(S(),H(M,{key:0,value:i.value,"onUpdate:value":[L=>i.value=L,L=>_(L,i)],size:"small"},null,8,["value","onUpdate:value"])):i.type==="number"?(S(),H(R,{key:1,value:i.value,"onUpdate:value":[L=>i.value=L,L=>_(L,i)],class:"input-num-width",size:"small",step:i.step||null,suffix:i.suffix||null,min:i.min||0},null,8,["value","onUpdate:value","step","suffix","min"])):i.type==="select"?(S(),H(A,{key:2,class:"select-min-width",value:i.value,"onUpdate:value":[L=>i.value=L,L=>_(L,i)],size:"small",options:i.options},null,8,["value","onUpdate:value","options"])):pe("",!0)]),_:2},1024),D(h,null,{default:w(()=>[D(C,{class:"item-right"},{default:w(()=>[ge(ue(i.desc),1)]),_:2},1024),i.tip?(S(),H(K,{key:0,trigger:"hover"},{trigger:w(()=>[D(g,{size:"21"},{default:w(()=>[D(c(o))]),_:1})]),default:w(()=>[I("span",null,ue(i.tip),1)]),_:2},1024)):pe("",!0)]),_:2},1024)]),_:2},1024))]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])}}});var To=de(wo,[["__scopeId","data-v-7cea0aa5"]]);const Ae=ce(),xo=()=>{Ae.setTargetSelectChart(void 0),dn(pn(Ae.getStorageInfo||[]),void 0,"json");const t=document.querySelector(".go-edit-range"),n=document.getElementById("go-edit-watermark");if(!t||!n){window.$message.error("\u5BFC\u51FA\u5931\u8D25\uFF01");return}const e=Ae.getEditCanvas.scale;Ae.setScale(1,!0),n.style.display="block",setTimeout(()=>{fn(t,()=>{n&&(n.style.display="none"),Ae.setScale(e,!0)})},600)};var rt=(t=>(t.TXT="text/plain",t.JSON="application/json",t.PNG="image/png",t.JPEG="image/jpeg",t.GIF="image/gif",t))(rt||{});const Fo=()=>{const t=Z(),{updateComponent:n}=Ft();return{importUploadFileListRef:t,importBeforeUpload:({file:o})=>{t.value=[];const v=o.file.type;return v!==rt.JSON&&v!==rt.TXT?(window.$message.warning("\u4EC5\u652F\u6301\u4E0A\u4F20 \u3010JSON\u3011 \u683C\u5F0F\u6587\u4EF6\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0},importCustomRequest:o=>{const{file:v}=o;vn(()=>{v.file?hn(v.file).then(l=>{xn({message:"\u8BF7\u9009\u62E9\u5BFC\u5165\u65B9\u5F0F:",positiveText:"\u65B0\u589E\uFF08\u53EF\u64A4\u56DE\uFF09",negativeText:"\u8986\u76D6\uFF08\u4E0D\u53EF\u64A4\u56DE\uFF09",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>Fe(void 0,null,function*(){try{l=et(l),yield n(l,!1,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(E){console.log(E),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}}),onNegativeCallback:()=>Fe(void 0,null,function*(){try{l=et(l),yield n(l,!0,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(E){console.log(E),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}})})}):window.$message.error("\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6570\u636E\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01")})}}},{updateComponent:Do,dataSyncUpdate:Tt}=Ft(),Ao=ce(),ko=()=>{const t=v=>Do(v.detail,!0,!1),n=()=>Fe(void 0,null,function*(){Tt&&(yield Tt()),dispatchEvent(new CustomEvent(ze.CHART,{detail:Ao.getStorageInfo}))}),e=()=>{addEventListener("blur",n),addEventListener(ze.JSON,t)},s=()=>{removeEventListener(ze.JSON,t),removeEventListener("blur",n)};return(v,l)=>{l==_t.CHART_HOME_NAME&&s(),v==_t.CHART_HOME_NAME&&e()}},bo=()=>{const t=kt();he(()=>t.name,ko(),{immediate:!0})};var ye=(t=>(t.BUTTON="button",t.IMPORTUPLOAD="importUpload",t))(ye||{});const Lo={class:"btn-item"},Ro=ie({__name:"index",setup(t){const{DownloadIcon:n,ShareIcon:e,PawIcon:s,SettingsSharpIcon:o,CreateIcon:v}=Te.ionicons5,l=ct(),E=ce();kt(),bo();let m=null;const f=Z(!1),_=Z(!0),d=Z(!0),{importUploadFileListRef:a,importCustomRequest:r,importBeforeUpload:g}=Fo(),h=P(()=>l.getChartToolsStatus===Pe.ASIDE),y=P(()=>l.getChartToolsStatusHide),C=P(()=>_.value&&y.value),M=P(()=>{if(!h.value)return j;const $=[];return j.map(i=>{$.unshift(i)}),$}),R=()=>{m=setTimeout(()=>{_.value&&(_.value=!1,d.value=!0)},200),setTimeout(()=>{d.value=!1},400)},A=()=>{clearTimeout(m),_.value||(_.value=!0)},K=()=>{window.$message.warning("\u5C06\u5F00\u542F\u5931\u7126\u66F4\u65B0\uFF01"),setTimeout(()=>{const $=_n(mn.CHART_EDIT_NAME,"href");if(!$)return;const i=Cn();X(i),yn($,[i],void 0,!0)},1e3)},X=$=>{const i=E.getStorageInfo,L=En(Be.GO_CHART_STORAGE_LIST)||[];if(L!=null&&L.length){const N=L.findIndex(x=>x.id===$);N!==-1?(L.splice(N,1,Ee(Y({},i),{id:$})),Je(Be.GO_CHART_STORAGE_LIST,L)):(L.push(Ee(Y({},i),{id:$})),Je(Be.GO_CHART_STORAGE_LIST,L))}else Je(Be.GO_CHART_STORAGE_LIST,[Ee(Y({},i),{id:$})])},j=[{key:"import",type:ye.IMPORTUPLOAD,name:"\u5BFC\u5165",icon:e},{key:"export",type:ye.BUTTON,name:"\u5BFC\u51FA",icon:n,handle:xo},{key:"edit",type:ye.BUTTON,name:"\u7F16\u8F91",icon:v,handle:K},{key:"setting",type:ye.BUTTON,name:"\u8BBE\u7F6E",icon:o,handle:()=>{f.value=!0}}];return($,i)=>{const L=B("n-icon"),N=B("n-text"),x=B("n-button"),O=B("n-upload"),u=B("n-tooltip");return S(),z(_e,null,[I("div",{class:ve(["go-chart-edit-tools",[c(l).getChartToolsStatus,C.value?"isMini":"unMini"]]),onClick:i[1]||(i[1]=p=>_.value&&(_.value=!1)),onMouseenter:R,onMouseleave:A},[je(D(L,{class:"asideLogo",size:"22"},{default:w(()=>[D(c(s))]),_:1},512),[[qe,c(l).getChartToolsStatus===c(Pe).ASIDE&&C.value]]),(S(!0),z(_e,null,me(M.value,(p,k)=>(S(),H(u,{key:p.key,disabled:!h.value||y.value&&d.value,trigger:"hover",placement:"left"},{trigger:w(()=>[I("div",Lo,[p.type===c(ye).BUTTON?(S(),H(x,{key:0,circle:h.value,secondary:"",onClick:p.handle},{icon:w(()=>[h.value?(S(),H(L,{key:0,size:"22"},{default:w(()=>[(S(),H(Se(p.icon)))]),_:2},1024)):(S(),H(Se(p.icon),{key:1}))]),default:w(()=>[je(D(N,{depth:"3"},{default:w(()=>[ge(ue(p.name),1)]),_:2},1536),[[qe,!h.value]])]),_:2},1032,["circle","onClick"])):p.type===c(ye).IMPORTUPLOAD?(S(),H(O,{key:1,"file-list":c(a),"onUpdate:fileList":i[0]||(i[0]=b=>gn(a)?a.value=b:null),"show-file-list":!1,customRequest:c(r),onBeforeUpload:c(g)},{default:w(()=>[D(x,{circle:h.value,secondary:""},{icon:w(()=>[h.value?(S(),H(L,{key:0,size:"22"},{default:w(()=>[(S(),H(Se(p.icon)))]),_:2},1024)):(S(),H(Se(p.icon),{key:1}))]),default:w(()=>[je(D(N,{depth:"3"},{default:w(()=>[ge(ue(p.name),1)]),_:2},1536),[[qe,!h.value]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):pe("",!0)])]),default:w(()=>[I("span",null,ue(p.name),1)]),_:2},1032,["disabled"]))),128))],34),D(c(To),{modelShow:f.value,"onUpdate:modelShow":i[2]||(i[2]=p=>f.value=p)},null,8,["modelShow"])],64)}}});var Oo=de(Ro,[["__scopeId","data-v-4c257f27"]]);const Bo=ie({__name:"index",setup(t){const n=ce(),{handleContextMenu:e}=it();Dn();const{mouseenterHandle:s,mouseleaveHandle:o,mousedownHandle:v,mouseClickHandle:l}=Rt(),E=(d,a,r)=>{if(n.getTargetChart.selectId.length>1)return a.filter(h=>[F.GROUP,F.DELETE].includes(h.key));const g=[];return r.status.lock?g.push(F.LOCK):g.push(F.UNLOCK),r.status.hide?g.push(F.HIDE):g.push(F.SHOW),d.filter(h=>!g.includes(h.key))},m=P(()=>n.getEditCanvasConfig.chartThemeSetting),f=P(()=>{const d=n.getEditCanvasConfig.chartThemeColor;return xt[d]});P(()=>n.getEditCanvasConfig.filterShow);const _=P(()=>{const d=n.getEditCanvasConfig.background,a=n.getEditCanvasConfig.backgroundImage,h=n.getEditCanvasConfig.selectColor?{background:d||void 0}:{background:`url(${a}) no-repeat center center / cover !important`};return Ee(Y({},h),{width:"inherit",height:"inherit"})});return ut(()=>{Ln()}),(d,a)=>(S(),H(c(Fn),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:c(Lt),onDrop:c(On),onDragover:c(Ct),onDragenter:c(Ct)},{default:w(()=>[D(c(no),null,{default:w(()=>[I("div",{id:"go-chart-edit-content",onContextmenu:a[0]||(a[0]=(...r)=>c(e)&&c(e)(...r))},[D(c(jn),null,{default:w(()=>[I("div",{style:se(Y(Y({},c(He)(c(n).getEditCanvasConfig)),_.value))},[(S(!0),z(_e,null,me(c(n).getComponentList,(r,g)=>(S(),z("div",{key:r.id},[r.isGroup?(S(),H(c(Hn),{key:0,groupData:r,groupIndex:g},null,8,["groupData","groupIndex"])):(S(),H(c(ot),{key:1,"data-id":r.id,index:g,style:se(Y(Y({},c(Ie)(r.attr,g)),c(At)(r.styles))),item:r,onClick:h=>c(l)(h,r),onMousedown:h=>c(v)(h,r),onMouseenter:h=>c(s)(h,r),onMouseleave:h=>c(o)(h,r),onContextmenu:h=>c(e)(h,r,E)},{default:w(()=>{var h,y,C,M;return[c(zt)(r)&&!((h=r.option)!=null&&h.isDeleted)?(S(),H(c(jt),{key:0,title:c(qt)(r),attr:r.attr,titleSize:c(Jt)(r),titleStyle:c(Vt)(r)},null,8,["title","attr","titleSize","titleStyle"])):pe("",!0),c(Zt)(r)&&!((y=r.option)!=null&&y.isDeleted)?(S(),H(c(Qt),{key:1,class:"filter-content",componentIdx:r.id,attr:r.attr,filters:r.chartConfig.filters,type:r.chartConfig.category},null,8,["componentIdx","attr","filters","type"])):pe("",!0),(C=r.option)!=null&&C.isDeleted?(S(),H(c(en),{key:2,item:r,style:se(Ee(Y({},c(ft)(r.attr,0)),{lineHeight:r.attr.h+"px"}))},null,8,["item","style"])):pe("",!0),(M=r.option)!=null&&M.isDeleted?pe("",!0):(S(),H(Se(r.chartConfig.chartKey),{key:3,class:ve(["edit-content-chart",c(tt)(r.styles.animations)]),chartConfig:r,themeSetting:m.value,themeColor:f.value,style:se(Y(Y(Y({},c(ft)(r.attr,c(tn)(r)+c(nn)(r))),c(He)(r.styles)),c(nt)(r.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]}),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1}),I("template",null,[D(c(Oo))]),I("template",null,[D(c(So))])]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});var Xo=de(Bo,[["__scopeId","data-v-1f1a2a96"]]);export{Xo as default};
