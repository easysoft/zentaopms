var q=(e,t,s)=>new Promise((r,a)=>{var l=f=>{try{y(s.next(f))}catch(b){a(b)}},x=f=>{try{y(s.throw(f))}catch(b){a(b)}},y=f=>f.done?r(f.value):Promise.resolve(f.value).then(l,x);y((s=s.apply(e,t)).next())});import{d as K,q as g,O as z,c8 as ue,V as ve,o as c,h as m,c9 as _e,ca as ee,cb as de,cc as me,a as pe,cd as ge,ce as fe,cf as ye,cg as he,aj as Ce,a3 as be,y as ke,r as L,c as I,a7 as p,z as _,e as O,f as o,w as $,F,A as M,t as E,p as te,ch as Oe,ci as Se,u as Ee,a1 as Ie,aF as xe,$ as N,bI as De,aX as Le,ab as Te}from"./index.js";import{C as Ae}from"./index-c3a43dfc.js";import{m as Ne,l as we,u as Pe,n as Y,p as Re,q as $e,r as J,k as ne,s as ze,P as w,v as P}from"./useSync.hook-e3ec9dcf.js";import{i as ae}from"./icon-b56e8ed7.js";const Fe={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},X=K({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,s=g(""),r=()=>q(this,null,function*(){s.value=yield Ne(t.chartConfig)});return z(()=>t.chartConfig.key,()=>r(),{immediate:!0}),(a,l)=>{const x=ue("lazy");return ve((c(),m("img",Fe,null,512)),[[x,s.value]])}}});function Me(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ue=Me;function Be(e,t,s){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),s=s>a?a:s,s<0&&(s+=a),a=t>s?0:s-t>>>0,t>>>=0;for(var l=Array(a);++r<a;)l[r]=e[r+t];return l}var Ke=Be,Ve=_e,Ge=Ke;function He(e,t){return t.length<2?e:Ve(e,Ge(t,0,-1))}var je=He,qe=ee,Ye=Ue,Je=je,Xe=de;function Qe(e,t){return t=qe(t,e),e=Je(e,t),e==null||delete e[Xe(Ye(t))]}var We=Qe,Ze=me;function et(e){return Ze(e)?void 0:e}var tt=et,nt=pe,at=he,st=We,ot=ee,lt=ge,ct=tt,it=fe,rt=ye,ut=1,vt=2,_t=4,dt=it(function(e,t){var s={};if(e==null)return s;var r=!1;t=nt(t,function(l){return l=ot(l,e),r||(r=l.length>1),l}),lt(e,rt(e),s),r&&(s=at(s,ut|vt|_t,ct));for(var a=t.length;a--;)st(s,t[a]);return s}),mt=dt;const pt={class:"go-chart-common"},gt={key:0,class:"charts"},ft={class:"tree-top"},yt={class:"tree-body"},ht={class:"chapter chapter-first"},Ct=["title"],bt={class:"label-count"},kt=["onDragstart"],Ot=["title"],St={key:1,class:"chapter chapter-last"},Et=["title"],It={class:"label-count"},xt=["onDragstart"],Dt=["title"],Lt={key:1,class:"no-charts"},Tt={class:"chart-content-list"},At=K({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){const t=we(()=>Ce(()=>import("./index-2d5be9a9.js"),["static/js/index-2d5be9a9.js","static/css/index-83988386.css","static/js/index-ed7889c9.js","static/css/index-a63cd1ae.css","static/js/index.js","static/css/index-a5cae02a.css","static/js/icon-b56e8ed7.js","static/js/useSync.hook-e3ec9dcf.js","static/css/useSync.hook-606a8118.css","static/js/plugin-ecf8da84.js","static/js/tables_list-33bcbabb.js","static/js/index-c3a43dfc.js","static/css/index-050929c2.css"])),{ChevronUpOutlineIcon:s,ChevronDownOutlineIcon:r}=ae.ionicons5,a=Pe(),l=e,x=g(a.getDimensions),y=g(a.getDimension),f=g(a.getScopeList),b=g(a.getScope);z(()=>a.getDimensions,()=>{x.value=a.getDimensions,y.value=a.getDimension}),z(()=>a.getScopeList,()=>{f.value=a.getScopeList,b.value=a.getScope});const T=be(()=>{const i=a.getTreeData,{chart:n,pivot:h,metric:D}=i;return n&&l.menu=="Charts"?n[y.value]:h&&l.menu=="Tables"?h[y.value]:D&&l.menu=="Metrics"?D[b.value]:[]}),A=g(!1),k=g([]),se=()=>{A.value=!A.value;for(const i in T.value){k.value[T.value[i].id]=A.value;for(const n in T.value[i].child)k.value[T.value[i].child[n].id]=A.value}},V=i=>{k.value[i]=!k.value[i]};let v=ke({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const U=g(),oe=i=>{for(const n in i){v.selectOptions=i[n];break}};z(()=>l.selectOptions,i=>{if(v.categorysNum=0,!!i){i.list.forEach(n=>{const h=v.categorys[n.category];v.categorys[n.category]=h&&h.length?[...h,n]:[n],v.categoryNames[n.category]=n.categoryName,v.categorys.all.push(n)});for(const n in v.categorys)v.categorysNum+=1,v.menuOptions.push({key:n,label:v.categoryNames[n]});oe(v.categorys),U.value=v.menuOptions[0].key}},{immediate:!0});const le=i=>{v.selectOptions=v.categorys[i]},G=(i,n)=>{Y(n.chartKey,Re(n)),Y(n.conKey,$e(n)),i.dataTransfer.setData(Oe.DRAG_KEY,Se(mt(n,["image"]))),a.setEditCanvas(J.IS_CREATE,!0)},H=()=>{a.setEditCanvas(J.IS_CREATE,!1)};return(i,n)=>{const h=L("n-select"),D=L("n-icon"),j=L("n-scrollbar"),ce=L("n-menu");return c(),m("div",pt,[e.menu=="Charts"||e.menu=="Tables"||e.menu=="Metrics"?(c(),m("div",gt,[e.menu=="Charts"||e.menu=="Tables"?(c(),I(h,{key:0,class:"dimension-btn",value:y.value,"onUpdate:value":n[0]||(n[0]=d=>y.value=d),options:x.value},null,8,["value","options"])):p("",!0),e.menu=="Metrics"?(c(),I(h,{key:1,class:"dimension-btn",value:b.value,"onUpdate:value":n[1]||(n[1]=d=>b.value=d),options:f.value},null,8,["value","options"])):p("",!0),_("div",ft,[n[3]||(n[3]=_("span",null,"\u6240\u6709\u5206\u7EC4",-1)),O(D,{size:"16",component:A.value?o(s):o(r),onClick:se},null,8,["component"])]),_("div",yt,[O(j,null,{default:$(()=>[(c(!0),m(F,null,M(T.value,(d,jt)=>(c(),m("div",{key:d.id,class:"tree-item"},[_("div",null,[_("div",ht,[O(D,{size:"16",component:k.value[d.id]?o(s):o(r),onClick:u=>V(d.id)},null,8,["component","onClick"]),_("label",{title:d.title,class:"text-nowrap label-title"},E(d.title),9,Ct),_("label",bt,E(d.count),1)]),d.child&&k.value[d.id]?(c(!0),m(F,{key:0},M(d.child,u=>(c(),m("div",{class:"tree-child",key:u.id},[u.type!="chapter"?(c(),m("div",{key:0,class:"item-box",draggable:"true",onDragstart:C=>G(C,u.chartConfig),onDragend:H},[u.chartConfig.image?(c(),I(o(X),{key:0,class:"list-img",chartConfig:u.chartConfig},null,8,["chartConfig"])):p("",!0),_("span",{title:u.title},E(u.title),9,Ot)],40,kt)):p("",!0),u.type=="chapter"?(c(),m("div",St,[O(D,{size:"16",component:k.value[u.id]?o(s):o(r),onClick:C=>V(u.id)},null,8,["component","onClick"]),_("label",{title:u.title,class:"text-nowrap"},E(u.title),9,Et),_("label",It,E(u.child.length),1)])):p("",!0),u.child&&k.value[u.id]?(c(!0),m(F,{key:2},M(u.child,(C,ie)=>(c(),m("div",{class:"tree-child",key:ie},[C.type!="chapter"?(c(),m("div",{key:0,class:"item-box",draggable:"true",onDragstart:re=>G(re,C.chartConfig),onDragend:H},[C.chartConfig.image?(c(),I(o(X),{key:0,class:"list-img",chartConfig:C.chartConfig},null,8,["chartConfig"])):p("",!0),_("p",{title:C.title,class:"text-nowrap"},E(C.title),9,Dt)],40,xt)):p("",!0)]))),128)):p("",!0)]))),128)):p("",!0)])]))),128))]),_:1})])])):p("",!0),e.menu!="Charts"&&e.menu!="Tables"&&e.menu!="Metrics"?(c(),m("div",Lt,[O(ce,{class:"chart-menu-width",value:U.value,"onUpdate:value":[n[2]||(n[2]=d=>U.value=d),le],options:o(v).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),_("div",Tt,[O(j,null,{default:$(()=>[O(o(t),{menuOptions:o(v).selectOptions},null,8,["menuOptions"])]),_:1})])])):p("",!0)])}}});var Nt=te(At,[["__scopeId","data-v-41349444"]]);const wt=Ee(),Pt=g(wt.getAppTheme);ne();const{getCharts:Rt}=Ie(ne()),$t=xe({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(ze)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:zt,RoadmapIcon:Ft,SpellCheckIcon:Mt,GraphicalDataFlowIcon:Q}=ae.carbon,{getPackagesList:W}=$t(),S=[],Z={[w.CHARTS]:{icon:N(Ft),label:P.CHARTS},[w.INFORMATIONS]:{icon:N(Mt),label:P.INFORMATIONS},[w.TABLES]:{icon:N(zt),label:P.TABLES},[w.DECORATES]:{icon:N(Q),label:P.DECORATES},[w.METRICS]:{icon:N(Q),label:P.METRICS}},Ut=()=>{for(const e in W)S.push({key:e,icon:Z[e].icon,label:Z[e].label,list:W[e]})};Ut();S[0].key;const R=g(S[0].key),B=g(S[0]),Bt=e=>{for(const t in S)S[t].key==e&&(B.value=S[t])};const Kt={class:"menu-width-box"},Vt={class:"menu-component-box"},Gt=K({__name:"index",setup(e){return De(t=>({"4f5e7069":o(Pt)})),(t,s)=>{const r=L("n-tab-pane"),a=L("n-tabs");return c(),I(o(Ae),{class:Te(["go-content-charts",{scoped:!o(Rt)}]),backIcon:!1},{default:$(()=>[_("aside",null,[_("div",Kt,[O(a,{value:o(R),"onUpdate:value":[s[0]||(s[0]=l=>Le(R)?R.value=l:null),o(Bt)],class:"tabs-box",size:"small",type:"segment"},{default:$(()=>[(c(!0),m(F,null,M(o(S),l=>(c(),I(r,{key:l.key,name:l.key,size:"small","display-directive":"show:lazy"},{tab:$(()=>[_("span",null,E(l.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),_("div",Vt,[o(B)?(c(),I(o(Nt),{selectOptions:o(B),menu:o(R),key:o(R)},null,8,["selectOptions","menu"])):p("",!0)])])])]),_:1},8,["class"])}}});var Ht=te(Gt,[["__scopeId","data-v-d847829a"]]),Wt=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));export{X as _,Wt as i,mt as o};
