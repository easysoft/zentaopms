import{t,b as e}from"./p-b80ff9a8.js";import"./p-f027b047.js";import"./p-0d1d1366.js";
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var r=Object.defineProperty;var n=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var i=Object.prototype.hasOwnProperty;var o=(t,e,n)=>e in t?r(t,e,{enumerable:true,configurable:true,writable:true,value:n}):t[e]=n;var a=(t,e,o,a)=>{if(e&&typeof e==="object"||typeof e==="function"){for(let c of s(e))if(!i.call(t,c)&&c!==o)r(t,c,{get:()=>e[c],enumerable:!(a=n(e,c))||a.enumerable})}return t};var c=(t,e,r)=>(a(t,e,"default"),r&&a(r,e,"default"));var u=(t,e,r)=>{o(t,typeof e!=="symbol"?e+"":e,r);return r};var l={};c(l,e);var f=class{constructor(t,e){this._modeId=t;this._defaults=e;this._worker=null;this._client=null;this._configChangeListener=this._defaults.onDidChange((()=>this._stopWorker()));this._updateExtraLibsToken=0;this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange((()=>this._updateExtraLibs()))}_configChangeListener;_updateExtraLibsToken;_extraLibsChangeListener;_worker;_client;dispose(){this._configChangeListener.dispose();this._extraLibsChangeListener.dispose();this._stopWorker()}_stopWorker(){if(this._worker){this._worker.dispose();this._worker=null}this._client=null}async _updateExtraLibs(){if(!this._worker){return}const t=++this._updateExtraLibsToken;const e=await this._worker.getProxy();if(this._updateExtraLibsToken!==t){return}e.updateExtraLibs(this._defaults.getExtraLibs())}_getClient(){if(!this._client){this._client=(async()=>{this._worker=l.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:true,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}});if(this._defaults.getEagerModelSync()){return await this._worker.withSyncedResources(l.editor.getModels().filter((t=>t.getLanguageId()===this._modeId)).map((t=>t.uri)))}return await this._worker.getProxy()})()}return this._client}async getLanguageServiceWorker(...t){const e=await this._getClient();if(this._worker){await this._worker.withSyncedResources(t)}return e}};var h={};h["lib.d.ts"]=true;h["lib.decorators.d.ts"]=true;h["lib.decorators.legacy.d.ts"]=true;h["lib.dom.d.ts"]=true;h["lib.dom.iterable.d.ts"]=true;h["lib.es2015.collection.d.ts"]=true;h["lib.es2015.core.d.ts"]=true;h["lib.es2015.d.ts"]=true;h["lib.es2015.generator.d.ts"]=true;h["lib.es2015.iterable.d.ts"]=true;h["lib.es2015.promise.d.ts"]=true;h["lib.es2015.proxy.d.ts"]=true;h["lib.es2015.reflect.d.ts"]=true;h["lib.es2015.symbol.d.ts"]=true;h["lib.es2015.symbol.wellknown.d.ts"]=true;h["lib.es2016.array.include.d.ts"]=true;h["lib.es2016.d.ts"]=true;h["lib.es2016.full.d.ts"]=true;h["lib.es2017.d.ts"]=true;h["lib.es2017.full.d.ts"]=true;h["lib.es2017.intl.d.ts"]=true;h["lib.es2017.object.d.ts"]=true;h["lib.es2017.sharedmemory.d.ts"]=true;h["lib.es2017.string.d.ts"]=true;h["lib.es2017.typedarrays.d.ts"]=true;h["lib.es2018.asyncgenerator.d.ts"]=true;h["lib.es2018.asynciterable.d.ts"]=true;h["lib.es2018.d.ts"]=true;h["lib.es2018.full.d.ts"]=true;h["lib.es2018.intl.d.ts"]=true;h["lib.es2018.promise.d.ts"]=true;h["lib.es2018.regexp.d.ts"]=true;h["lib.es2019.array.d.ts"]=true;h["lib.es2019.d.ts"]=true;h["lib.es2019.full.d.ts"]=true;h["lib.es2019.intl.d.ts"]=true;h["lib.es2019.object.d.ts"]=true;h["lib.es2019.string.d.ts"]=true;h["lib.es2019.symbol.d.ts"]=true;h["lib.es2020.bigint.d.ts"]=true;h["lib.es2020.d.ts"]=true;h["lib.es2020.date.d.ts"]=true;h["lib.es2020.full.d.ts"]=true;h["lib.es2020.intl.d.ts"]=true;h["lib.es2020.number.d.ts"]=true;h["lib.es2020.promise.d.ts"]=true;h["lib.es2020.sharedmemory.d.ts"]=true;h["lib.es2020.string.d.ts"]=true;h["lib.es2020.symbol.wellknown.d.ts"]=true;h["lib.es2021.d.ts"]=true;h["lib.es2021.full.d.ts"]=true;h["lib.es2021.intl.d.ts"]=true;h["lib.es2021.promise.d.ts"]=true;h["lib.es2021.string.d.ts"]=true;h["lib.es2021.weakref.d.ts"]=true;h["lib.es2022.array.d.ts"]=true;h["lib.es2022.d.ts"]=true;h["lib.es2022.error.d.ts"]=true;h["lib.es2022.full.d.ts"]=true;h["lib.es2022.intl.d.ts"]=true;h["lib.es2022.object.d.ts"]=true;h["lib.es2022.regexp.d.ts"]=true;h["lib.es2022.sharedmemory.d.ts"]=true;h["lib.es2022.string.d.ts"]=true;h["lib.es2023.array.d.ts"]=true;h["lib.es2023.d.ts"]=true;h["lib.es2023.full.d.ts"]=true;h["lib.es5.d.ts"]=true;h["lib.es6.d.ts"]=true;h["lib.esnext.d.ts"]=true;h["lib.esnext.full.d.ts"]=true;h["lib.esnext.intl.d.ts"]=true;h["lib.scripthost.d.ts"]=true;h["lib.webworker.d.ts"]=true;h["lib.webworker.importscripts.d.ts"]=true;h["lib.webworker.iterable.d.ts"]=true;function d(t,e,r=0){if(typeof t==="string"){return t}else if(t===void 0){return""}let n="";if(r){n+=e;for(let t=0;t<r;t++){n+="  "}}n+=t.messageText;r++;if(t.next){for(const s of t.next){n+=d(s,e,r)}}return n}function m(t){if(t){return t.map((t=>t.text)).join("")}return""}var p=class{constructor(t){this._worker=t}_textSpanToRange(t,e){let r=t.getPositionAt(e.start);let n=t.getPositionAt(e.start+e.length);let{lineNumber:s,column:i}=r;let{lineNumber:o,column:a}=n;return{startLineNumber:s,startColumn:i,endLineNumber:o,endColumn:a}}};var g=class{constructor(t){this._worker=t;this._libFiles={};this._hasFetchedLibFiles=false;this._fetchLibFilesPromise=null}_libFiles;_hasFetchedLibFiles;_fetchLibFilesPromise;isLibFile(t){if(!t){return false}if(t.path.indexOf("/lib.")===0){return!!h[t.path.slice(1)]}return false}getOrCreateModel(e){const r=l.Uri.parse(e);const n=l.editor.getModel(r);if(n){return n}if(this.isLibFile(r)&&this._hasFetchedLibFiles){return l.editor.createModel(this._libFiles[r.path.slice(1)],"typescript",r)}const s=t.getExtraLibs()[e];if(s){return l.editor.createModel(s.content,"typescript",r)}return null}_containsLibFile(t){for(let e of t){if(this.isLibFile(e)){return true}}return false}async fetchLibFilesIfNecessary(t){if(!this._containsLibFile(t)){return}await this._fetchLibFiles()}_fetchLibFiles(){if(!this._fetchLibFilesPromise){this._fetchLibFilesPromise=this._worker().then((t=>t.getLibFiles())).then((t=>{this._hasFetchedLibFiles=true;this._libFiles=t}))}return this._fetchLibFilesPromise}};var w=class extends p{constructor(t,e,r,n){super(n);this._libFiles=t;this._defaults=e;this._selector=r;const s=t=>{if(t.getLanguageId()!==r){return}const e=()=>{const{onlyVisible:e}=this._defaults.getDiagnosticsOptions();if(e){if(t.isAttachedToEditor()){this._doValidate(t)}}else{this._doValidate(t)}};let n;const s=t.onDidChangeContent((()=>{clearTimeout(n);n=window.setTimeout(e,500)}));const i=t.onDidChangeAttached((()=>{const{onlyVisible:r}=this._defaults.getDiagnosticsOptions();if(r){if(t.isAttachedToEditor()){e()}else{l.editor.setModelMarkers(t,this._selector,[])}}}));this._listener[t.uri.toString()]={dispose(){s.dispose();i.dispose();clearTimeout(n)}};e()};const i=t=>{l.editor.setModelMarkers(t,this._selector,[]);const e=t.uri.toString();if(this._listener[e]){this._listener[e].dispose();delete this._listener[e]}};this._disposables.push(l.editor.onDidCreateModel((t=>s(t))));this._disposables.push(l.editor.onWillDisposeModel(i));this._disposables.push(l.editor.onDidChangeModelLanguage((t=>{i(t.model);s(t.model)})));this._disposables.push({dispose(){for(const t of l.editor.getModels()){i(t)}}});const o=()=>{for(const t of l.editor.getModels()){i(t);s(t)}};this._disposables.push(this._defaults.onDidChange(o));this._disposables.push(this._defaults.onDidExtraLibsChange(o));l.editor.getModels().forEach((t=>s(t)))}_disposables=[];_listener=Object.create(null);dispose(){this._disposables.forEach((t=>t&&t.dispose()));this._disposables=[]}async _doValidate(t){const e=await this._worker(t.uri);if(t.isDisposed()){return}const r=[];const{noSyntaxValidation:n,noSemanticValidation:s,noSuggestionDiagnostics:i}=this._defaults.getDiagnosticsOptions();if(!n){r.push(e.getSyntacticDiagnostics(t.uri.toString()))}if(!s){r.push(e.getSemanticDiagnostics(t.uri.toString()))}if(!i){r.push(e.getSuggestionDiagnostics(t.uri.toString()))}const o=await Promise.all(r);if(!o||t.isDisposed()){return}const a=o.reduce(((t,e)=>e.concat(t)),[]).filter((t=>(this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(t.code)===-1));const c=a.map((t=>t.relatedInformation||[])).reduce(((t,e)=>e.concat(t)),[]).map((t=>t.file?l.Uri.parse(t.file.fileName):null));await this._libFiles.fetchLibFilesIfNecessary(c);if(t.isDisposed()){return}l.editor.setModelMarkers(t,this._selector,a.map((e=>this._convertDiagnostics(t,e))))}_convertDiagnostics(t,e){const r=e.start||0;const n=e.length||1;const{lineNumber:s,column:i}=t.getPositionAt(r);const{lineNumber:o,column:a}=t.getPositionAt(r+n);const c=[];if(e.reportsUnnecessary){c.push(l.MarkerTag.Unnecessary)}if(e.reportsDeprecated){c.push(l.MarkerTag.Deprecated)}return{severity:this._tsDiagnosticCategoryToMarkerSeverity(e.category),startLineNumber:s,startColumn:i,endLineNumber:o,endColumn:a,message:d(e.messageText,"\n"),code:e.code.toString(),tags:c,relatedInformation:this._convertRelatedInformation(t,e.relatedInformation)}}_convertRelatedInformation(t,e){if(!e){return[]}const r=[];e.forEach((e=>{let n=t;if(e.file){n=this._libFiles.getOrCreateModel(e.file.fileName)}if(!n){return}const s=e.start||0;const i=e.length||1;const{lineNumber:o,column:a}=n.getPositionAt(s);const{lineNumber:c,column:u}=n.getPositionAt(s+i);r.push({resource:n.uri,startLineNumber:o,startColumn:a,endLineNumber:c,endColumn:u,message:d(e.messageText,"\n")})}));return r}_tsDiagnosticCategoryToMarkerSeverity(t){switch(t){case 1:return l.MarkerSeverity.Error;case 3:return l.MarkerSeverity.Info;case 0:return l.MarkerSeverity.Warning;case 2:return l.MarkerSeverity.Hint}return l.MarkerSeverity.Info}};var v=class extends p{get triggerCharacters(){return["."]}async provideCompletionItems(t,e,r,n){const s=t.getWordUntilPosition(e);const i=new l.Range(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn);const o=t.uri;const a=t.getOffsetAt(e);const c=await this._worker(o);if(t.isDisposed()){return}const u=await c.getCompletionsAtPosition(o.toString(),a);if(!u||t.isDisposed()){return}const f=u.entries.map((r=>{let n=i;if(r.replacementSpan){const e=t.getPositionAt(r.replacementSpan.start);const s=t.getPositionAt(r.replacementSpan.start+r.replacementSpan.length);n=new l.Range(e.lineNumber,e.column,s.lineNumber,s.column)}const s=[];if(r.kindModifiers!==void 0&&r.kindModifiers.indexOf("deprecated")!==-1){s.push(l.languages.CompletionItemTag.Deprecated)}return{uri:o,position:e,offset:a,range:n,label:r.name,insertText:r.name,sortText:r.sortText,kind:v.convertKind(r.kind),tags:s}}));return{suggestions:f}}async resolveCompletionItem(t,e){const r=t;const n=r.uri;const s=r.position;const i=r.offset;const o=await this._worker(n);const a=await o.getCompletionEntryDetails(n.toString(),i,r.label);if(!a){return r}return{uri:n,position:s,label:a.name,kind:v.convertKind(a.kind),detail:m(a.displayParts),documentation:{value:v.createDocumentationString(a)}}}static convertKind(t){switch(t){case _.primitiveType:case _.keyword:return l.languages.CompletionItemKind.Keyword;case _.variable:case _.localVariable:return l.languages.CompletionItemKind.Variable;case _.memberVariable:case _.memberGetAccessor:case _.memberSetAccessor:return l.languages.CompletionItemKind.Field;case _.function:case _.memberFunction:case _.constructSignature:case _.callSignature:case _.indexSignature:return l.languages.CompletionItemKind.Function;case _.enum:return l.languages.CompletionItemKind.Enum;case _.module:return l.languages.CompletionItemKind.Module;case _.class:return l.languages.CompletionItemKind.Class;case _.interface:return l.languages.CompletionItemKind.Interface;case _.warning:return l.languages.CompletionItemKind.File}return l.languages.CompletionItemKind.Property}static createDocumentationString(t){let e=m(t.documentation);if(t.tags){for(const r of t.tags){e+=`\n\n${b(r)}`}}return e}};function b(t){let e=`*@${t.name}*`;if(t.name==="param"&&t.text){const[r,...n]=t.text;e+=`\`${r.text}\``;if(n.length>0)e+=` — ${n.map((t=>t.text)).join(" ")}`}else if(Array.isArray(t.text)){e+=` — ${t.text.map((t=>t.text)).join(" ")}`}else if(t.text){e+=` — ${t.text}`}return e}var y=class extends p{signatureHelpTriggerCharacters=["(",","];static _toSignatureHelpTriggerReason(t){switch(t.triggerKind){case l.languages.SignatureHelpTriggerKind.TriggerCharacter:if(t.triggerCharacter){if(t.isRetrigger){return{kind:"retrigger",triggerCharacter:t.triggerCharacter}}else{return{kind:"characterTyped",triggerCharacter:t.triggerCharacter}}}else{return{kind:"invoked"}}case l.languages.SignatureHelpTriggerKind.ContentChange:return t.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case l.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}async provideSignatureHelp(t,e,r,n){const s=t.uri;const i=t.getOffsetAt(e);const o=await this._worker(s);if(t.isDisposed()){return}const a=await o.getSignatureHelpItems(s.toString(),i,{triggerReason:y._toSignatureHelpTriggerReason(n)});if(!a||t.isDisposed()){return}const c={activeSignature:a.selectedItemIndex,activeParameter:a.argumentIndex,signatures:[]};a.items.forEach((t=>{const e={label:"",parameters:[]};e.documentation={value:m(t.documentation)};e.label+=m(t.prefixDisplayParts);t.parameters.forEach(((r,n,s)=>{const i=m(r.displayParts);const o={label:i,documentation:{value:m(r.documentation)}};e.label+=i;e.parameters.push(o);if(n<s.length-1){e.label+=m(t.separatorDisplayParts)}}));e.label+=m(t.suffixDisplayParts);c.signatures.push(e)}));return{value:c,dispose(){}}}};var x=class extends p{async provideHover(t,e,r){const n=t.uri;const s=t.getOffsetAt(e);const i=await this._worker(n);if(t.isDisposed()){return}const o=await i.getQuickInfoAtPosition(n.toString(),s);if(!o||t.isDisposed()){return}const a=m(o.documentation);const c=o.tags?o.tags.map((t=>b(t))).join("  \n\n"):"";const u=m(o.displayParts);return{range:this._textSpanToRange(t,o.textSpan),contents:[{value:"```typescript\n"+u+"\n```\n"},{value:a+(c?"\n\n"+c:"")}]}}};var S=class extends p{async provideDocumentHighlights(t,e,r){const n=t.uri;const s=t.getOffsetAt(e);const i=await this._worker(n);if(t.isDisposed()){return}const o=await i.getDocumentHighlights(n.toString(),s,[n.toString()]);if(!o||t.isDisposed()){return}return o.flatMap((e=>e.highlightSpans.map((e=>({range:this._textSpanToRange(t,e.textSpan),kind:e.kind==="writtenReference"?l.languages.DocumentHighlightKind.Write:l.languages.DocumentHighlightKind.Text})))))}};var C=class extends p{constructor(t,e){super(e);this._libFiles=t}async provideDefinition(t,e,r){const n=t.uri;const s=t.getOffsetAt(e);const i=await this._worker(n);if(t.isDisposed()){return}const o=await i.getDefinitionAtPosition(n.toString(),s);if(!o||t.isDisposed()){return}await this._libFiles.fetchLibFilesIfNecessary(o.map((t=>l.Uri.parse(t.fileName))));if(t.isDisposed()){return}const a=[];for(let t of o){const e=this._libFiles.getOrCreateModel(t.fileName);if(e){a.push({uri:e.uri,range:this._textSpanToRange(e,t.textSpan)})}}return a}};var k=class extends p{constructor(t,e){super(e);this._libFiles=t}async provideReferences(t,e,r,n){const s=t.uri;const i=t.getOffsetAt(e);const o=await this._worker(s);if(t.isDisposed()){return}const a=await o.getReferencesAtPosition(s.toString(),i);if(!a||t.isDisposed()){return}await this._libFiles.fetchLibFilesIfNecessary(a.map((t=>l.Uri.parse(t.fileName))));if(t.isDisposed()){return}const c=[];for(let t of a){const e=this._libFiles.getOrCreateModel(t.fileName);if(e){c.push({uri:e.uri,range:this._textSpanToRange(e,t.textSpan)})}}return c}};var N=class extends p{async provideDocumentSymbols(t,e){const r=t.uri;const n=await this._worker(r);if(t.isDisposed()){return}const s=await n.getNavigationTree(r.toString());if(!s||t.isDisposed()){return}const i=(e,r)=>{const n={name:e.text,detail:"",kind:I[e.kind]||l.languages.SymbolKind.Variable,range:this._textSpanToRange(t,e.spans[0]),selectionRange:this._textSpanToRange(t,e.spans[0]),tags:[],children:e.childItems?.map((t=>i(t,n.name))),containerName:r};return n};const o=s.childItems?s.childItems.map((t=>i(t))):[];return o}};var _=class{};u(_,"unknown","");u(_,"keyword","keyword");u(_,"script","script");u(_,"module","module");u(_,"class","class");u(_,"interface","interface");u(_,"type","type");u(_,"enum","enum");u(_,"variable","var");u(_,"localVariable","local var");u(_,"function","function");u(_,"localFunction","local function");u(_,"memberFunction","method");u(_,"memberGetAccessor","getter");u(_,"memberSetAccessor","setter");u(_,"memberVariable","property");u(_,"constructorImplementation","constructor");u(_,"callSignature","call");u(_,"indexSignature","index");u(_,"constructSignature","construct");u(_,"parameter","parameter");u(_,"typeParameter","type parameter");u(_,"primitiveType","primitive type");u(_,"label","label");u(_,"alias","alias");u(_,"const","const");u(_,"let","let");u(_,"warning","warning");var I=Object.create(null);I[_.module]=l.languages.SymbolKind.Module;I[_.class]=l.languages.SymbolKind.Class;I[_.enum]=l.languages.SymbolKind.Enum;I[_.interface]=l.languages.SymbolKind.Interface;I[_.memberFunction]=l.languages.SymbolKind.Method;I[_.memberVariable]=l.languages.SymbolKind.Property;I[_.memberGetAccessor]=l.languages.SymbolKind.Property;I[_.memberSetAccessor]=l.languages.SymbolKind.Property;I[_.variable]=l.languages.SymbolKind.Variable;I[_.const]=l.languages.SymbolKind.Variable;I[_.localVariable]=l.languages.SymbolKind.Variable;I[_.variable]=l.languages.SymbolKind.Variable;I[_.function]=l.languages.SymbolKind.Function;I[_.localFunction]=l.languages.SymbolKind.Function;var F=class extends p{static _convertOptions(t){return{ConvertTabsToSpaces:t.insertSpaces,TabSize:t.tabSize,IndentSize:t.tabSize,IndentStyle:2,NewLineCharacter:"\n",InsertSpaceAfterCommaDelimiter:true,InsertSpaceAfterSemicolonInForStatements:true,InsertSpaceBeforeAndAfterBinaryOperators:true,InsertSpaceAfterKeywordsInControlFlowStatements:true,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:true,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:false,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:false,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:false,PlaceOpenBraceOnNewLineForControlBlocks:false,PlaceOpenBraceOnNewLineForFunctions:false}}_convertTextChanges(t,e){return{text:e.newText,range:this._textSpanToRange(t,e.span)}}};var L=class extends F{canFormatMultipleRanges=false;async provideDocumentRangeFormattingEdits(t,e,r,n){const s=t.uri;const i=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn});const o=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn});const a=await this._worker(s);if(t.isDisposed()){return}const c=await a.getFormattingEditsForRange(s.toString(),i,o,F._convertOptions(r));if(!c||t.isDisposed()){return}return c.map((e=>this._convertTextChanges(t,e)))}};var T=class extends F{get autoFormatTriggerCharacters(){return[";","}","\n"]}async provideOnTypeFormattingEdits(t,e,r,n,s){const i=t.uri;const o=t.getOffsetAt(e);const a=await this._worker(i);if(t.isDisposed()){return}const c=await a.getFormattingEditsAfterKeystroke(i.toString(),o,r,F._convertOptions(n));if(!c||t.isDisposed()){return}return c.map((e=>this._convertTextChanges(t,e)))}};var O=class extends F{async provideCodeActions(t,e,r,n){const s=t.uri;const i=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn});const o=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn});const a=F._convertOptions(t.getOptions());const c=r.markers.filter((t=>t.code)).map((t=>t.code)).map(Number);const u=await this._worker(s);if(t.isDisposed()){return}const l=await u.getCodeFixesAtPosition(s.toString(),i,o,c,a);if(!l||t.isDisposed()){return{actions:[],dispose:()=>{}}}const f=l.filter((t=>t.changes.filter((t=>t.isNewFile)).length===0)).map((e=>this._tsCodeFixActionToMonacoCodeAction(t,r,e)));return{actions:f,dispose:()=>{}}}_tsCodeFixActionToMonacoCodeAction(t,e,r){const n=[];for(const e of r.changes){for(const r of e.textChanges){n.push({resource:t.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(t,r.span),text:r.newText}})}}const s={title:r.description,edit:{edits:n},diagnostics:e.markers,kind:"quickfix"};return s}};var A=class extends p{constructor(t,e){super(e);this._libFiles=t}async provideRenameEdits(t,e,r,n){const s=t.uri;const i=s.toString();const o=t.getOffsetAt(e);const a=await this._worker(s);if(t.isDisposed()){return}const c=await a.getRenameInfo(i,o,{allowRenameOfImportPath:false});if(c.canRename===false){return{edits:[],rejectReason:c.localizedErrorMessage}}if(c.fileToRename!==void 0){throw new Error("Renaming files is not supported.")}const u=await a.findRenameLocations(i,o,false,false,false);if(!u||t.isDisposed()){return}const l=[];for(const t of u){const e=this._libFiles.getOrCreateModel(t.fileName);if(e){l.push({resource:e.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(e,t.textSpan),text:r}})}else{throw new Error(`Unknown file ${t.fileName}.`)}}return{edits:l}}};var R=class extends p{async provideInlayHints(t,e,r){const n=t.uri;const s=n.toString();const i=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn});const o=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn});const a=await this._worker(n);if(t.isDisposed()){return null}const c=await a.provideInlayHints(s,i,o);const u=c.map((e=>({...e,label:e.text,position:t.getPositionAt(e.position),kind:this._convertHintKind(e.kind)})));return{hints:u,dispose:()=>{}}}_convertHintKind(t){switch(t){case"Parameter":return l.languages.InlayHintKind.Parameter;case"Type":return l.languages.InlayHintKind.Type;default:return l.languages.InlayHintKind.Type}}};var j;var P;function B(t){P=V(t,"typescript")}function D(t){j=V(t,"javascript")}function E(){return new Promise(((t,e)=>{if(!j){return e("JavaScript not registered!")}t(j)}))}function H(){return new Promise(((t,e)=>{if(!P){return e("TypeScript not registered!")}t(P)}))}function V(t,e){const r=[];const n=new f(e,t);const s=(...t)=>n.getLanguageServiceWorker(...t);const i=new g(s);function o(){const{modeConfiguration:n}=t;$(r);if(n.completionItems){r.push(l.languages.registerCompletionItemProvider(e,new v(s)))}if(n.signatureHelp){r.push(l.languages.registerSignatureHelpProvider(e,new y(s)))}if(n.hovers){r.push(l.languages.registerHoverProvider(e,new x(s)))}if(n.documentHighlights){r.push(l.languages.registerDocumentHighlightProvider(e,new S(s)))}if(n.definitions){r.push(l.languages.registerDefinitionProvider(e,new C(i,s)))}if(n.references){r.push(l.languages.registerReferenceProvider(e,new k(i,s)))}if(n.documentSymbols){r.push(l.languages.registerDocumentSymbolProvider(e,new N(s)))}if(n.rename){r.push(l.languages.registerRenameProvider(e,new A(i,s)))}if(n.documentRangeFormattingEdits){r.push(l.languages.registerDocumentRangeFormattingEditProvider(e,new L(s)))}if(n.onTypeFormattingEdits){r.push(l.languages.registerOnTypeFormattingEditProvider(e,new T(s)))}if(n.codeActions){r.push(l.languages.registerCodeActionProvider(e,new O(s)))}if(n.inlayHints){r.push(l.languages.registerInlayHintsProvider(e,new R(s)))}if(n.diagnostics){r.push(new w(i,t,e,s))}}o();return s}function $(t){while(t.length){t.pop().dispose()}}export{p as Adapter,O as CodeActionAdaptor,C as DefinitionAdapter,w as DiagnosticsAdapter,S as DocumentHighlightAdapter,L as FormatAdapter,F as FormatHelper,T as FormatOnTypeAdapter,R as InlayHintsAdapter,_ as Kind,g as LibFiles,N as OutlineAdapter,x as QuickInfoAdapter,k as ReferenceAdapter,A as RenameAdapter,y as SignatureHelpAdapter,v as SuggestAdapter,f as WorkerManager,d as flattenDiagnosticMessageText,E as getJavaScriptWorker,H as getTypeScriptWorker,D as setupJavaScript,B as setupTypeScript};
//# sourceMappingURL=p-aebcbb44.js.map