import{b as n}from"./p-b80ff9a8.js";import"./p-f027b047.js";import"./p-0d1d1366.js";
/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var e=Object.getOwnPropertyNames;var i=Object.prototype.hasOwnProperty;var u=(n,u,o,a)=>{if(u&&typeof u==="object"||typeof u==="function"){for(let s of e(u))if(!i.call(n,s)&&s!==o)t(n,s,{get:()=>u[s],enumerable:!(a=r(u,s))||a.enumerable})}return n};var o=(n,t,r)=>(u(n,t,"default"),r&&u(r,t,"default"));var a={};o(a,n);var s=2*60*1e3;var c=class{_defaults;_idleCheckInterval;_lastUsedTime;_configChangeListener;_worker;_client;constructor(n){this._defaults=n;this._worker=null;this._client=null;this._idleCheckInterval=window.setInterval((()=>this._checkIfIdle()),30*1e3);this._lastUsedTime=0;this._configChangeListener=this._defaults.onDidChange((()=>this._stopWorker()))}_stopWorker(){if(this._worker){this._worker.dispose();this._worker=null}this._client=null}dispose(){clearInterval(this._idleCheckInterval);this._configChangeListener.dispose();this._stopWorker()}_checkIfIdle(){if(!this._worker){return}let n=Date.now()-this._lastUsedTime;if(n>s){this._stopWorker()}}_getClient(){this._lastUsedTime=Date.now();if(!this._client){this._worker=a.editor.createWebWorker({moduleId:"vs/language/html/htmlWorker",createData:{languageSettings:this._defaults.options,languageId:this._defaults.languageId},label:this._defaults.languageId});this._client=this._worker.getProxy()}return this._client}getLanguageServiceWorker(...n){let t;return this._getClient().then((n=>{t=n})).then((t=>{if(this._worker){return this._worker.withSyncedResources(n)}})).then((n=>t))}};var f;(function(n){n.MIN_VALUE=-2147483648;n.MAX_VALUE=2147483647})(f||(f={}));var v;(function(n){n.MIN_VALUE=0;n.MAX_VALUE=2147483647})(v||(v={}));var h;(function(n){function t(n,t){if(n===Number.MAX_VALUE){n=v.MAX_VALUE}if(t===Number.MAX_VALUE){t=v.MAX_VALUE}return{line:n,character:t}}n.create=t;function r(n){var t=n;return mn.objectLiteral(t)&&mn.uinteger(t.line)&&mn.uinteger(t.character)}n.is=r})(h||(h={}));var d;(function(n){function t(n,t,r,e){if(mn.uinteger(n)&&mn.uinteger(t)&&mn.uinteger(r)&&mn.uinteger(e)){return{start:h.create(n,t),end:h.create(r,e)}}else if(h.is(n)&&h.is(t)){return{start:n,end:t}}else{throw new Error("Range#create called with invalid arguments["+n+", "+t+", "+r+", "+e+"]")}}n.create=t;function r(n){var t=n;return mn.objectLiteral(t)&&h.is(t.start)&&h.is(t.end)}n.is=r})(d||(d={}));var l;(function(n){function t(n,t){return{uri:n,range:t}}n.create=t;function r(n){var t=n;return mn.defined(t)&&d.is(t.range)&&(mn.string(t.uri)||mn.undefined(t.uri))}n.is=r})(l||(l={}));var g;(function(n){function t(n,t,r,e){return{targetUri:n,targetRange:t,targetSelectionRange:r,originSelectionRange:e}}n.create=t;function r(n){var t=n;return mn.defined(t)&&d.is(t.targetRange)&&mn.string(t.targetUri)&&(d.is(t.targetSelectionRange)||mn.undefined(t.targetSelectionRange))&&(d.is(t.originSelectionRange)||mn.undefined(t.originSelectionRange))}n.is=r})(g||(g={}));var w;(function(n){function t(n,t,r,e){return{red:n,green:t,blue:r,alpha:e}}n.create=t;function r(n){var t=n;return mn.numberRange(t.red,0,1)&&mn.numberRange(t.green,0,1)&&mn.numberRange(t.blue,0,1)&&mn.numberRange(t.alpha,0,1)}n.is=r})(w||(w={}));var m;(function(n){function t(n,t){return{range:n,color:t}}n.create=t;function r(n){var t=n;return d.is(t.range)&&w.is(t.color)}n.is=r})(m||(m={}));var b;(function(n){function t(n,t,r){return{label:n,textEdit:t,additionalTextEdits:r}}n.create=t;function r(n){var t=n;return mn.string(t.label)&&(mn.undefined(t.textEdit)||_.is(t))&&(mn.undefined(t.additionalTextEdits)||mn.typedArray(t.additionalTextEdits,_.is))}n.is=r})(b||(b={}));var p;(function(n){n["Comment"]="comment";n["Imports"]="imports";n["Region"]="region"})(p||(p={}));var j;(function(n){function t(n,t,r,e,i){var u={startLine:n,endLine:t};if(mn.defined(r)){u.startCharacter=r}if(mn.defined(e)){u.endCharacter=e}if(mn.defined(i)){u.kind=i}return u}n.create=t;function r(n){var t=n;return mn.uinteger(t.startLine)&&mn.uinteger(t.startLine)&&(mn.undefined(t.startCharacter)||mn.uinteger(t.startCharacter))&&(mn.undefined(t.endCharacter)||mn.uinteger(t.endCharacter))&&(mn.undefined(t.kind)||mn.string(t.kind))}n.is=r})(j||(j={}));var x;(function(n){function t(n,t){return{location:n,message:t}}n.create=t;function r(n){var t=n;return mn.defined(t)&&l.is(t.location)&&mn.string(t.message)}n.is=r})(x||(x={}));var k;(function(n){n.Error=1;n.Warning=2;n.Information=3;n.Hint=4})(k||(k={}));var y;(function(n){n.Unnecessary=1;n.Deprecated=2})(y||(y={}));var I;(function(n){function t(n){var t=n;return t!==void 0&&t!==null&&mn.string(t.href)}n.is=t})(I||(I={}));var O;(function(n){function t(n,t,r,e,i,u){var o={range:n,message:t};if(mn.defined(r)){o.severity=r}if(mn.defined(e)){o.code=e}if(mn.defined(i)){o.source=i}if(mn.defined(u)){o.relatedInformation=u}return o}n.create=t;function r(n){var t;var r=n;return mn.defined(r)&&d.is(r.range)&&mn.string(r.message)&&(mn.number(r.severity)||mn.undefined(r.severity))&&(mn.integer(r.code)||mn.string(r.code)||mn.undefined(r.code))&&(mn.undefined(r.codeDescription)||mn.string((t=r.codeDescription)===null||t===void 0?void 0:t.href))&&(mn.string(r.source)||mn.undefined(r.source))&&(mn.undefined(r.relatedInformation)||mn.typedArray(r.relatedInformation,x.is))}n.is=r})(O||(O={}));var E;(function(n){function t(n,t){var r=[];for(var e=2;e<arguments.length;e++){r[e-2]=arguments[e]}var i={title:n,command:t};if(mn.defined(r)&&r.length>0){i.arguments=r}return i}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.string(t.title)&&mn.string(t.command)}n.is=r})(E||(E={}));var _;(function(n){function t(n,t){return{range:n,newText:t}}n.replace=t;function r(n,t){return{range:{start:n,end:n},newText:t}}n.insert=r;function e(n){return{range:n,newText:""}}n.del=e;function i(n){var t=n;return mn.objectLiteral(t)&&mn.string(t.newText)&&d.is(t.range)}n.is=i})(_||(_={}));var S;(function(n){function t(n,t,r){var e={label:n};if(t!==void 0){e.needsConfirmation=t}if(r!==void 0){e.description=r}return e}n.create=t;function r(n){var t=n;return t!==void 0&&mn.objectLiteral(t)&&mn.string(t.label)&&(mn.boolean(t.needsConfirmation)||t.needsConfirmation===void 0)&&(mn.string(t.description)||t.description===void 0)}n.is=r})(S||(S={}));var T;(function(n){function t(n){var t=n;return typeof t==="string"}n.is=t})(T||(T={}));var R;(function(n){function t(n,t,r){return{range:n,newText:t,annotationId:r}}n.replace=t;function r(n,t,r){return{range:{start:n,end:n},newText:t,annotationId:r}}n.insert=r;function e(n,t){return{range:n,newText:"",annotationId:t}}n.del=e;function i(n){var t=n;return _.is(t)&&(S.is(t.annotationId)||T.is(t.annotationId))}n.is=i})(R||(R={}));var C;(function(n){function t(n,t){return{textDocument:n,edits:t}}n.create=t;function r(n){var t=n;return mn.defined(t)&&U.is(t.textDocument)&&Array.isArray(t.edits)}n.is=r})(C||(C={}));var D;(function(n){function t(n,t,r){var e={kind:"create",uri:n};if(t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)){e.options=t}if(r!==void 0){e.annotationId=r}return e}n.create=t;function r(n){var t=n;return t&&t.kind==="create"&&mn.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||mn.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||mn.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||T.is(t.annotationId))}n.is=r})(D||(D={}));var N;(function(n){function t(n,t,r,e){var i={kind:"rename",oldUri:n,newUri:t};if(r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)){i.options=r}if(e!==void 0){i.annotationId=e}return i}n.create=t;function r(n){var t=n;return t&&t.kind==="rename"&&mn.string(t.oldUri)&&mn.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||mn.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||mn.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||T.is(t.annotationId))}n.is=r})(N||(N={}));var W;(function(n){function t(n,t,r){var e={kind:"delete",uri:n};if(t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)){e.options=t}if(r!==void 0){e.annotationId=r}return e}n.create=t;function r(n){var t=n;return t&&t.kind==="delete"&&mn.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||mn.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||mn.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===void 0||T.is(t.annotationId))}n.is=r})(W||(W={}));var L;(function(n){function t(n){var t=n;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every((function(n){if(mn.string(n.kind)){return D.is(n)||N.is(n)||W.is(n)}else{return C.is(n)}})))}n.is=t})(L||(L={}));var A=function(){function n(n,t){this.edits=n;this.changeAnnotations=t}n.prototype.insert=function(n,t,r){var e;var i;if(r===void 0){e=_.insert(n,t)}else if(T.is(r)){i=r;e=R.insert(n,t,r)}else{this.assertChangeAnnotations(this.changeAnnotations);i=this.changeAnnotations.manage(r);e=R.insert(n,t,i)}this.edits.push(e);if(i!==void 0){return i}};n.prototype.replace=function(n,t,r){var e;var i;if(r===void 0){e=_.replace(n,t)}else if(T.is(r)){i=r;e=R.replace(n,t,r)}else{this.assertChangeAnnotations(this.changeAnnotations);i=this.changeAnnotations.manage(r);e=R.replace(n,t,i)}this.edits.push(e);if(i!==void 0){return i}};n.prototype.delete=function(n,t){var r;var e;if(t===void 0){r=_.del(n)}else if(T.is(t)){e=t;r=R.del(n,t)}else{this.assertChangeAnnotations(this.changeAnnotations);e=this.changeAnnotations.manage(t);r=R.del(n,e)}this.edits.push(r);if(e!==void 0){return e}};n.prototype.add=function(n){this.edits.push(n)};n.prototype.all=function(){return this.edits};n.prototype.clear=function(){this.edits.splice(0,this.edits.length)};n.prototype.assertChangeAnnotations=function(n){if(n===void 0){throw new Error("Text edit change is not configured to manage change annotations.")}};return n}();var M=function(){function n(n){this._annotations=n===void 0?Object.create(null):n;this._counter=0;this._size=0}n.prototype.all=function(){return this._annotations};Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});n.prototype.manage=function(n,t){var r;if(T.is(n)){r=n}else{r=this.nextId();t=n}if(this._annotations[r]!==void 0){throw new Error("Id "+r+" is already in use.")}if(t===void 0){throw new Error("No annotation provided for id "+r)}this._annotations[r]=t;this._size++;return r};n.prototype.nextId=function(){this._counter++;return this._counter.toString()};return n}();(function(){function n(n){var t=this;this._textEditChanges=Object.create(null);if(n!==void 0){this._workspaceEdit=n;if(n.documentChanges){this._changeAnnotations=new M(n.changeAnnotations);n.changeAnnotations=this._changeAnnotations.all();n.documentChanges.forEach((function(n){if(C.is(n)){var r=new A(n.edits,t._changeAnnotations);t._textEditChanges[n.textDocument.uri]=r}}))}else if(n.changes){Object.keys(n.changes).forEach((function(r){var e=new A(n.changes[r]);t._textEditChanges[r]=e}))}}else{this._workspaceEdit={}}}Object.defineProperty(n.prototype,"edit",{get:function(){this.initDocumentChanges();if(this._changeAnnotations!==void 0){if(this._changeAnnotations.size===0){this._workspaceEdit.changeAnnotations=void 0}else{this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()}}return this._workspaceEdit},enumerable:false,configurable:true});n.prototype.getTextEditChange=function(n){if(U.is(n)){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.")}var t={uri:n.uri,version:n.version};var r=this._textEditChanges[t.uri];if(!r){var e=[];var i={textDocument:t,edits:e};this._workspaceEdit.documentChanges.push(i);r=new A(e,this._changeAnnotations);this._textEditChanges[t.uri]=r}return r}else{this.initChanges();if(this._workspaceEdit.changes===void 0){throw new Error("Workspace edit is not configured for normal text edit changes.")}var r=this._textEditChanges[n];if(!r){var e=[];this._workspaceEdit.changes[n]=e;r=new A(e);this._textEditChanges[n]=r}return r}};n.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0){this._changeAnnotations=new M;this._workspaceEdit.documentChanges=[];this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()}};n.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0){this._workspaceEdit.changes=Object.create(null)}};n.prototype.createFile=function(n,t,r){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.")}var e;if(S.is(t)||T.is(t)){e=t}else{r=t}var i;var u;if(e===void 0){i=D.create(n,r)}else{u=T.is(e)?e:this._changeAnnotations.manage(e);i=D.create(n,r,u)}this._workspaceEdit.documentChanges.push(i);if(u!==void 0){return u}};n.prototype.renameFile=function(n,t,r,e){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.")}var i;if(S.is(r)||T.is(r)){i=r}else{e=r}var u;var o;if(i===void 0){u=N.create(n,t,e)}else{o=T.is(i)?i:this._changeAnnotations.manage(i);u=N.create(n,t,e,o)}this._workspaceEdit.documentChanges.push(u);if(o!==void 0){return o}};n.prototype.deleteFile=function(n,t,r){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.")}var e;if(S.is(t)||T.is(t)){e=t}else{r=t}var i;var u;if(e===void 0){i=W.create(n,r)}else{u=T.is(e)?e:this._changeAnnotations.manage(e);i=W.create(n,r,u)}this._workspaceEdit.documentChanges.push(i);if(u!==void 0){return u}};return n})();var F;(function(n){function t(n){return{uri:n}}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.string(t.uri)}n.is=r})(F||(F={}));var z;(function(n){function t(n,t){return{uri:n,version:t}}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.string(t.uri)&&mn.integer(t.version)}n.is=r})(z||(z={}));var U;(function(n){function t(n,t){return{uri:n,version:t}}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.string(t.uri)&&(t.version===null||mn.integer(t.version))}n.is=r})(U||(U={}));var H;(function(n){function t(n,t,r,e){return{uri:n,languageId:t,version:r,text:e}}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.string(t.uri)&&mn.string(t.languageId)&&mn.integer(t.version)&&mn.string(t.text)}n.is=r})(H||(H={}));var $;(function(n){n.PlainText="plaintext";n.Markdown="markdown"})($||($={}));(function(n){function t(t){var r=t;return r===n.PlainText||r===n.Markdown}n.is=t})($||($={}));var q;(function(n){function t(n){var t=n;return mn.objectLiteral(n)&&$.is(t.kind)&&mn.string(t.value)}n.is=t})(q||(q={}));var P;(function(n){n.Text=1;n.Method=2;n.Function=3;n.Constructor=4;n.Field=5;n.Variable=6;n.Class=7;n.Interface=8;n.Module=9;n.Property=10;n.Unit=11;n.Value=12;n.Enum=13;n.Keyword=14;n.Snippet=15;n.Color=16;n.File=17;n.Reference=18;n.Folder=19;n.EnumMember=20;n.Constant=21;n.Struct=22;n.Event=23;n.Operator=24;n.TypeParameter=25})(P||(P={}));var V;(function(n){n.PlainText=1;n.Snippet=2})(V||(V={}));var B;(function(n){n.Deprecated=1})(B||(B={}));var G;(function(n){function t(n,t,r){return{newText:n,insert:t,replace:r}}n.create=t;function r(n){var t=n;return t&&mn.string(t.newText)&&d.is(t.insert)&&d.is(t.replace)}n.is=r})(G||(G={}));var J;(function(n){n.asIs=1;n.adjustIndentation=2})(J||(J={}));var K;(function(n){function t(n){return{label:n}}n.create=t})(K||(K={}));var Q;(function(n){function t(n,t){return{items:n?n:[],isIncomplete:!!t}}n.create=t})(Q||(Q={}));var X;(function(n){function t(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}n.fromPlainText=t;function r(n){var t=n;return mn.string(t)||mn.objectLiteral(t)&&mn.string(t.language)&&mn.string(t.value)}n.is=r})(X||(X={}));var Y;(function(n){function t(n){var t=n;return!!t&&mn.objectLiteral(t)&&(q.is(t.contents)||X.is(t.contents)||mn.typedArray(t.contents,X.is))&&(n.range===void 0||d.is(n.range))}n.is=t})(Y||(Y={}));var Z;(function(n){function t(n,t){return t?{label:n,documentation:t}:{label:n}}n.create=t})(Z||(Z={}));var nn;(function(n){function t(n,t){var r=[];for(var e=2;e<arguments.length;e++){r[e-2]=arguments[e]}var i={label:n};if(mn.defined(t)){i.documentation=t}if(mn.defined(r)){i.parameters=r}else{i.parameters=[]}return i}n.create=t})(nn||(nn={}));var tn;(function(n){n.Text=1;n.Read=2;n.Write=3})(tn||(tn={}));var rn;(function(n){function t(n,t){var r={range:n};if(mn.number(t)){r.kind=t}return r}n.create=t})(rn||(rn={}));var en;(function(n){n.File=1;n.Module=2;n.Namespace=3;n.Package=4;n.Class=5;n.Method=6;n.Property=7;n.Field=8;n.Constructor=9;n.Enum=10;n.Interface=11;n.Function=12;n.Variable=13;n.Constant=14;n.String=15;n.Number=16;n.Boolean=17;n.Array=18;n.Object=19;n.Key=20;n.Null=21;n.EnumMember=22;n.Struct=23;n.Event=24;n.Operator=25;n.TypeParameter=26})(en||(en={}));var un;(function(n){n.Deprecated=1})(un||(un={}));var on;(function(n){function t(n,t,r,e,i){var u={name:n,kind:t,location:{uri:e,range:r}};if(i){u.containerName=i}return u}n.create=t})(on||(on={}));var an;(function(n){function t(n,t,r,e,i,u){var o={name:n,detail:t,kind:r,range:e,selectionRange:i};if(u!==void 0){o.children=u}return o}n.create=t;function r(n){var t=n;return t&&mn.string(t.name)&&mn.number(t.kind)&&d.is(t.range)&&d.is(t.selectionRange)&&(t.detail===void 0||mn.string(t.detail))&&(t.deprecated===void 0||mn.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))&&(t.tags===void 0||Array.isArray(t.tags))}n.is=r})(an||(an={}));var sn;(function(n){n.Empty="";n.QuickFix="quickfix";n.Refactor="refactor";n.RefactorExtract="refactor.extract";n.RefactorInline="refactor.inline";n.RefactorRewrite="refactor.rewrite";n.Source="source";n.SourceOrganizeImports="source.organizeImports";n.SourceFixAll="source.fixAll"})(sn||(sn={}));var cn;(function(n){function t(n,t){var r={diagnostics:n};if(t!==void 0&&t!==null){r.only=t}return r}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.typedArray(t.diagnostics,O.is)&&(t.only===void 0||mn.typedArray(t.only,mn.string))}n.is=r})(cn||(cn={}));var fn;(function(n){function t(n,t,r){var e={title:n};var i=true;if(typeof t==="string"){i=false;e.kind=t}else if(E.is(t)){e.command=t}else{e.edit=t}if(i&&r!==void 0){e.kind=r}return e}n.create=t;function r(n){var t=n;return t&&mn.string(t.title)&&(t.diagnostics===void 0||mn.typedArray(t.diagnostics,O.is))&&(t.kind===void 0||mn.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||E.is(t.command))&&(t.isPreferred===void 0||mn.boolean(t.isPreferred))&&(t.edit===void 0||L.is(t.edit))}n.is=r})(fn||(fn={}));var vn;(function(n){function t(n,t){var r={range:n};if(mn.defined(t)){r.data=t}return r}n.create=t;function r(n){var t=n;return mn.defined(t)&&d.is(t.range)&&(mn.undefined(t.command)||E.is(t.command))}n.is=r})(vn||(vn={}));var hn;(function(n){function t(n,t){return{tabSize:n,insertSpaces:t}}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.uinteger(t.tabSize)&&mn.boolean(t.insertSpaces)}n.is=r})(hn||(hn={}));var dn;(function(n){function t(n,t,r){return{range:n,target:t,data:r}}n.create=t;function r(n){var t=n;return mn.defined(t)&&d.is(t.range)&&(mn.undefined(t.target)||mn.string(t.target))}n.is=r})(dn||(dn={}));var ln;(function(n){function t(n,t){return{range:n,parent:t}}n.create=t;function r(t){var r=t;return r!==void 0&&d.is(r.range)&&(r.parent===void 0||n.is(r.parent))}n.is=r})(ln||(ln={}));var gn;(function(n){function t(n,t,r,e){return new wn(n,t,r,e)}n.create=t;function r(n){var t=n;return mn.defined(t)&&mn.string(t.uri)&&(mn.undefined(t.languageId)||mn.string(t.languageId))&&mn.uinteger(t.lineCount)&&mn.func(t.getText)&&mn.func(t.positionAt)&&mn.func(t.offsetAt)?true:false}n.is=r;function e(n,t){var r=n.getText();var e=i(t,(function(n,t){var r=n.range.start.line-t.range.start.line;if(r===0){return n.range.start.character-t.range.start.character}return r}));var u=r.length;for(var o=e.length-1;o>=0;o--){var a=e[o];var s=n.offsetAt(a.range.start);var c=n.offsetAt(a.range.end);if(c<=u){r=r.substring(0,s)+a.newText+r.substring(c,r.length)}else{throw new Error("Overlapping edit")}u=s}return r}n.applyEdits=e;function i(n,t){if(n.length<=1){return n}var r=n.length/2|0;var e=n.slice(0,r);var u=n.slice(r);i(e,t);i(u,t);var o=0;var a=0;var s=0;while(o<e.length&&a<u.length){var c=t(e[o],u[a]);if(c<=0){n[s++]=e[o++]}else{n[s++]=u[a++]}}while(o<e.length){n[s++]=e[o++]}while(a<u.length){n[s++]=u[a++]}return n}})(gn||(gn={}));var wn=function(){function n(n,t,r,e){this._uri=n;this._languageId=t;this._version=r;this._content=e;this._lineOffsets=void 0}Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"version",{get:function(){return this._version},enumerable:false,configurable:true});n.prototype.getText=function(n){if(n){var t=this.offsetAt(n.start);var r=this.offsetAt(n.end);return this._content.substring(t,r)}return this._content};n.prototype.update=function(n,t){this._content=n.text;this._version=t;this._lineOffsets=void 0};n.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){var n=[];var t=this._content;var r=true;for(var e=0;e<t.length;e++){if(r){n.push(e);r=false}var i=t.charAt(e);r=i==="\r"||i==="\n";if(i==="\r"&&e+1<t.length&&t.charAt(e+1)==="\n"){e++}}if(r&&t.length>0){n.push(t.length)}this._lineOffsets=n}return this._lineOffsets};n.prototype.positionAt=function(n){n=Math.max(Math.min(n,this._content.length),0);var t=this.getLineOffsets();var r=0,e=t.length;if(e===0){return h.create(0,n)}while(r<e){var i=Math.floor((r+e)/2);if(t[i]>n){e=i}else{r=i+1}}var u=r-1;return h.create(u,n-t[u])};n.prototype.offsetAt=function(n){var t=this.getLineOffsets();if(n.line>=t.length){return this._content.length}else if(n.line<0){return 0}var r=t[n.line];var e=n.line+1<t.length?t[n.line+1]:this._content.length;return Math.max(Math.min(r+n.character,e),r)};Object.defineProperty(n.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:false,configurable:true});return n}();var mn;(function(n){var t=Object.prototype.toString;function r(n){return typeof n!=="undefined"}n.defined=r;function e(n){return typeof n==="undefined"}n.undefined=e;function i(n){return n===true||n===false}n.boolean=i;function u(n){return t.call(n)==="[object String]"}n.string=u;function o(n){return t.call(n)==="[object Number]"}n.number=o;function a(n,r,e){return t.call(n)==="[object Number]"&&r<=n&&n<=e}n.numberRange=a;function s(n){return t.call(n)==="[object Number]"&&-2147483648<=n&&n<=2147483647}n.integer=s;function c(n){return t.call(n)==="[object Number]"&&0<=n&&n<=2147483647}n.uinteger=c;function f(n){return t.call(n)==="[object Function]"}n.func=f;function v(n){return n!==null&&typeof n==="object"}n.objectLiteral=v;function h(n,t){return Array.isArray(n)&&n.every(t)}n.typedArray=h})(mn||(mn={}));var bn=class{constructor(n,t,r){this._languageId=n;this._worker=t;const e=n=>{let t=n.getLanguageId();if(t!==this._languageId){return}let r;this._listener[n.uri.toString()]=n.onDidChangeContent((()=>{window.clearTimeout(r);r=window.setTimeout((()=>this._doValidate(n.uri,t)),500)}));this._doValidate(n.uri,t)};const i=n=>{a.editor.setModelMarkers(n,this._languageId,[]);let t=n.uri.toString();let r=this._listener[t];if(r){r.dispose();delete this._listener[t]}};this._disposables.push(a.editor.onDidCreateModel(e));this._disposables.push(a.editor.onWillDisposeModel(i));this._disposables.push(a.editor.onDidChangeModelLanguage((n=>{i(n.model);e(n.model)})));this._disposables.push(r((n=>{a.editor.getModels().forEach((n=>{if(n.getLanguageId()===this._languageId){i(n);e(n)}}))})));this._disposables.push({dispose:()=>{a.editor.getModels().forEach(i);for(let n in this._listener){this._listener[n].dispose()}}});a.editor.getModels().forEach(e)}_disposables=[];_listener=Object.create(null);dispose(){this._disposables.forEach((n=>n&&n.dispose()));this._disposables.length=0}_doValidate(n,t){this._worker(n).then((t=>t.doValidation(n.toString()))).then((r=>{const e=r.map((t=>jn(n,t)));let i=a.editor.getModel(n);if(i&&i.getLanguageId()===t){a.editor.setModelMarkers(i,t,e)}})).then(void 0,(n=>{console.error(n)}))}};function pn(n){switch(n){case k.Error:return a.MarkerSeverity.Error;case k.Warning:return a.MarkerSeverity.Warning;case k.Information:return a.MarkerSeverity.Info;case k.Hint:return a.MarkerSeverity.Hint;default:return a.MarkerSeverity.Info}}function jn(n,t){let r=typeof t.code==="number"?String(t.code):t.code;return{severity:pn(t.severity),startLineNumber:t.range.start.line+1,startColumn:t.range.start.character+1,endLineNumber:t.range.end.line+1,endColumn:t.range.end.character+1,message:t.message,code:r,source:t.source}}var xn=class{constructor(n,t){this._worker=n;this._triggerCharacters=t}get triggerCharacters(){return this._triggerCharacters}provideCompletionItems(n,t,r,e){const i=n.uri;return this._worker(i).then((n=>n.doComplete(i.toString(),kn(t)))).then((r=>{if(!r){return}const e=n.getWordUntilPosition(t);const i=new a.Range(t.lineNumber,e.startColumn,t.lineNumber,e.endColumn);const u=r.items.map((n=>{const t={label:n.label,insertText:n.insertText||n.label,sortText:n.sortText,filterText:n.filterText,documentation:n.documentation,detail:n.detail,command:Sn(n.command),range:i,kind:En(n.kind)};if(n.textEdit){if(On(n.textEdit)){t.range={insert:In(n.textEdit.insert),replace:In(n.textEdit.replace)}}else{t.range=In(n.textEdit.range)}t.insertText=n.textEdit.newText}if(n.additionalTextEdits){t.additionalTextEdits=n.additionalTextEdits.map(_n)}if(n.insertTextFormat===V.Snippet){t.insertTextRules=a.languages.CompletionItemInsertTextRule.InsertAsSnippet}return t}));return{isIncomplete:r.isIncomplete,suggestions:u}}))}};function kn(n){if(!n){return void 0}return{character:n.column-1,line:n.lineNumber-1}}function yn(n){if(!n){return void 0}return{start:{line:n.startLineNumber-1,character:n.startColumn-1},end:{line:n.endLineNumber-1,character:n.endColumn-1}}}function In(n){if(!n){return void 0}return new a.Range(n.start.line+1,n.start.character+1,n.end.line+1,n.end.character+1)}function On(n){return typeof n.insert!=="undefined"&&typeof n.replace!=="undefined"}function En(n){const t=a.languages.CompletionItemKind;switch(n){case P.Text:return t.Text;case P.Method:return t.Method;case P.Function:return t.Function;case P.Constructor:return t.Constructor;case P.Field:return t.Field;case P.Variable:return t.Variable;case P.Class:return t.Class;case P.Interface:return t.Interface;case P.Module:return t.Module;case P.Property:return t.Property;case P.Unit:return t.Unit;case P.Value:return t.Value;case P.Enum:return t.Enum;case P.Keyword:return t.Keyword;case P.Snippet:return t.Snippet;case P.Color:return t.Color;case P.File:return t.File;case P.Reference:return t.Reference}return t.Property}function _n(n){if(!n){return void 0}return{range:In(n.range),text:n.newText}}function Sn(n){return n&&n.command==="editor.action.triggerSuggest"?{id:n.command,title:n.title,arguments:n.arguments}:void 0}var Tn=class{constructor(n){this._worker=n}provideHover(n,t,r){let e=n.uri;return this._worker(e).then((n=>n.doHover(e.toString(),kn(t)))).then((n=>{if(!n){return}return{range:In(n.range),contents:Dn(n.contents)}}))}};function Rn(n){return n&&typeof n==="object"&&typeof n.kind==="string"}function Cn(n){if(typeof n==="string"){return{value:n}}if(Rn(n)){if(n.kind==="plaintext"){return{value:n.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}}return{value:n.value}}return{value:"```"+n.language+"\n"+n.value+"\n```\n"}}function Dn(n){if(!n){return void 0}if(Array.isArray(n)){return n.map(Cn)}return[Cn(n)]}var Nn=class{constructor(n){this._worker=n}provideDocumentHighlights(n,t,r){const e=n.uri;return this._worker(e).then((n=>n.findDocumentHighlights(e.toString(),kn(t)))).then((n=>{if(!n){return}return n.map((n=>({range:In(n.range),kind:Wn(n.kind)})))}))}};function Wn(n){switch(n){case tn.Read:return a.languages.DocumentHighlightKind.Read;case tn.Write:return a.languages.DocumentHighlightKind.Write;case tn.Text:return a.languages.DocumentHighlightKind.Text}return a.languages.DocumentHighlightKind.Text}var Ln=class{constructor(n){this._worker=n}provideDefinition(n,t,r){const e=n.uri;return this._worker(e).then((n=>n.findDefinition(e.toString(),kn(t)))).then((n=>{if(!n){return}return[An(n)]}))}};function An(n){return{uri:a.Uri.parse(n.uri),range:In(n.range)}}var Mn=class{constructor(n){this._worker=n}provideReferences(n,t,r,e){const i=n.uri;return this._worker(i).then((n=>n.findReferences(i.toString(),kn(t)))).then((n=>{if(!n){return}return n.map(An)}))}};var Fn=class{constructor(n){this._worker=n}provideRenameEdits(n,t,r,e){const i=n.uri;return this._worker(i).then((n=>n.doRename(i.toString(),kn(t),r))).then((n=>zn(n)))}};function zn(n){if(!n||!n.changes){return void 0}let t=[];for(let r in n.changes){const e=a.Uri.parse(r);for(let i of n.changes[r]){t.push({resource:e,versionId:void 0,textEdit:{range:In(i.range),text:i.newText}})}}return{edits:t}}var Un=class{constructor(n){this._worker=n}provideDocumentSymbols(n,t){const r=n.uri;return this._worker(r).then((n=>n.findDocumentSymbols(r.toString()))).then((n=>{if(!n){return}return n.map((n=>({name:n.name,detail:"",containerName:n.containerName,kind:Hn(n.kind),range:In(n.location.range),selectionRange:In(n.location.range),tags:[]})))}))}};function Hn(n){let t=a.languages.SymbolKind;switch(n){case en.File:return t.Array;case en.Module:return t.Module;case en.Namespace:return t.Namespace;case en.Package:return t.Package;case en.Class:return t.Class;case en.Method:return t.Method;case en.Property:return t.Property;case en.Field:return t.Field;case en.Constructor:return t.Constructor;case en.Enum:return t.Enum;case en.Interface:return t.Interface;case en.Function:return t.Function;case en.Variable:return t.Variable;case en.Constant:return t.Constant;case en.String:return t.String;case en.Number:return t.Number;case en.Boolean:return t.Boolean;case en.Array:return t.Array}return t.Function}var $n=class{constructor(n){this._worker=n}provideLinks(n,t){const r=n.uri;return this._worker(r).then((n=>n.findDocumentLinks(r.toString()))).then((n=>{if(!n){return}return{links:n.map((n=>({range:In(n.range),url:n.target})))}}))}};var qn=class{constructor(n){this._worker=n}provideDocumentFormattingEdits(n,t,r){const e=n.uri;return this._worker(e).then((n=>n.format(e.toString(),null,Vn(t)).then((n=>{if(!n||n.length===0){return}return n.map(_n)}))))}};var Pn=class{constructor(n){this._worker=n}canFormatMultipleRanges=false;provideDocumentRangeFormattingEdits(n,t,r,e){const i=n.uri;return this._worker(i).then((n=>n.format(i.toString(),yn(t),Vn(r)).then((n=>{if(!n||n.length===0){return}return n.map(_n)}))))}};function Vn(n){return{tabSize:n.tabSize,insertSpaces:n.insertSpaces}}var Bn=class{constructor(n){this._worker=n}provideDocumentColors(n,t){const r=n.uri;return this._worker(r).then((n=>n.findDocumentColors(r.toString()))).then((n=>{if(!n){return}return n.map((n=>({color:n.color,range:In(n.range)})))}))}provideColorPresentations(n,t,r){const e=n.uri;return this._worker(e).then((n=>n.getColorPresentations(e.toString(),t.color,yn(t.range)))).then((n=>{if(!n){return}return n.map((n=>{let t={label:n.label};if(n.textEdit){t.textEdit=_n(n.textEdit)}if(n.additionalTextEdits){t.additionalTextEdits=n.additionalTextEdits.map(_n)}return t}))}))}};var Gn=class{constructor(n){this._worker=n}provideFoldingRanges(n,t,r){const e=n.uri;return this._worker(e).then((n=>n.getFoldingRanges(e.toString(),t))).then((n=>{if(!n){return}return n.map((n=>{const t={start:n.startLine+1,end:n.endLine+1};if(typeof n.kind!=="undefined"){t.kind=Jn(n.kind)}return t}))}))}};function Jn(n){switch(n){case p.Comment:return a.languages.FoldingRangeKind.Comment;case p.Imports:return a.languages.FoldingRangeKind.Imports;case p.Region:return a.languages.FoldingRangeKind.Region}return void 0}var Kn=class{constructor(n){this._worker=n}provideSelectionRanges(n,t,r){const e=n.uri;return this._worker(e).then((n=>n.getSelectionRanges(e.toString(),t.map(kn)))).then((n=>{if(!n){return}return n.map((n=>{const t=[];while(n){t.push({range:In(n.range)});n=n.parent}return t}))}))}};var Qn=class extends xn{constructor(n){super(n,[".",":","<",'"',"=","/"])}};function Xn(n){const t=new c(n);const r=(...n)=>t.getLanguageServiceWorker(...n);let e=n.languageId;a.languages.registerCompletionItemProvider(e,new Qn(r));a.languages.registerHoverProvider(e,new Tn(r));a.languages.registerDocumentHighlightProvider(e,new Nn(r));a.languages.registerLinkProvider(e,new $n(r));a.languages.registerFoldingRangeProvider(e,new Gn(r));a.languages.registerDocumentSymbolProvider(e,new Un(r));a.languages.registerSelectionRangeProvider(e,new Kn(r));a.languages.registerRenameProvider(e,new Fn(r));if(e==="html"){a.languages.registerDocumentFormattingEditProvider(e,new qn(r));a.languages.registerDocumentRangeFormattingEditProvider(e,new Pn(r))}}function Yn(n){const t=[];const r=[];const e=new c(n);t.push(e);const i=(...n)=>e.getLanguageServiceWorker(...n);function u(){const{languageId:t,modeConfiguration:e}=n;nt(r);if(e.completionItems){r.push(a.languages.registerCompletionItemProvider(t,new Qn(i)))}if(e.hovers){r.push(a.languages.registerHoverProvider(t,new Tn(i)))}if(e.documentHighlights){r.push(a.languages.registerDocumentHighlightProvider(t,new Nn(i)))}if(e.links){r.push(a.languages.registerLinkProvider(t,new $n(i)))}if(e.documentSymbols){r.push(a.languages.registerDocumentSymbolProvider(t,new Un(i)))}if(e.rename){r.push(a.languages.registerRenameProvider(t,new Fn(i)))}if(e.foldingRanges){r.push(a.languages.registerFoldingRangeProvider(t,new Gn(i)))}if(e.selectionRanges){r.push(a.languages.registerSelectionRangeProvider(t,new Kn(i)))}if(e.documentFormattingEdits){r.push(a.languages.registerDocumentFormattingEditProvider(t,new qn(i)))}if(e.documentRangeFormattingEdits){r.push(a.languages.registerDocumentRangeFormattingEditProvider(t,new Pn(i)))}}u();t.push(Zn(r));return Zn(t)}function Zn(n){return{dispose:()=>nt(n)}}function nt(n){while(n.length){n.pop().dispose()}}export{xn as CompletionAdapter,Ln as DefinitionAdapter,bn as DiagnosticsAdapter,Bn as DocumentColorAdapter,qn as DocumentFormattingEditProvider,Nn as DocumentHighlightAdapter,$n as DocumentLinkAdapter,Pn as DocumentRangeFormattingEditProvider,Un as DocumentSymbolAdapter,Gn as FoldingRangeAdapter,Tn as HoverAdapter,Mn as ReferenceAdapter,Fn as RenameAdapter,Kn as SelectionRangeAdapter,c as WorkerManager,kn as fromPosition,yn as fromRange,Yn as setupMode,Xn as setupMode1,In as toRange,_n as toTextEdit};
//# sourceMappingURL=p-f29f709f.js.map